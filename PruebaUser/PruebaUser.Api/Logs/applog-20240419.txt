2024-04-19 06:26:19.495 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 06:26:19.557 -05:00 [DBG] Hosting starting
2024-04-19 06:26:19.698 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 06:26:19.698 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 06:26:19.699 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 06:26:19.699 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 06:26:19.700 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 06:26:19.700 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 06:26:19.701 -05:00 [INF] Hosting environment: Development
2024-04-19 06:26:19.701 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 06:26:19.702 -05:00 [DBG] Hosting started
2024-04-19 06:26:19.955 -05:00 [DBG] Connection id "0HN30CE4J3NRA" accepted.
2024-04-19 06:26:19.968 -05:00 [DBG] Connection id "0HN30CE4J3NRA" started.
2024-04-19 06:26:20.019 -05:00 [DBG] Connection id "0HN30CE4J3NRB" accepted.
2024-04-19 06:26:20.020 -05:00 [DBG] Connection id "0HN30CE4J3NRB" started.
2024-04-19 06:26:20.378 -05:00 [DBG] Connection id "0HN30CE4J3NRC" accepted.
2024-04-19 06:26:20.379 -05:00 [DBG] Connection id "0HN30CE4J3NRC" started.
2024-04-19 06:26:20.421 -05:00 [DBG] Connection 0HN30CE4J3NRC established using the following protocol: "Tls13"
2024-04-19 06:26:20.468 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 06:26:20.604 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 06:26:20.615 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 06:26:20.617 -05:00 [DBG] Request did not match any endpoints
2024-04-19 06:26:20.676 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 06:26:20.677 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 06:26:20.689 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 06:26:20.690 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 06:26:20.694 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 228.141ms
2024-04-19 06:26:20.703 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 06:26:20.708 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 4.8421ms
2024-04-19 06:26:20.787 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 06:26:20.887 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 100.1128ms
2024-04-19 06:26:21.342 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 06:26:21.344 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 06:26:21.344 -05:00 [DBG] Request did not match any endpoints
2024-04-19 06:26:21.440 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 97.7027ms
2024-04-19 06:26:29.293 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 06:26:29.297 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 06:26:29.300 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 06:26:29.301 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 06:26:29.303 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:26:29.305 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 06:26:29.317 -05:00 [INF] Route matched with {action = "ListarUsuarios", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[PruebaUser.Core.DTOs.UsuarioDTO]]] ListarUsuarios() on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:26:29.319 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:26:29.320 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:26:29.321 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:26:29.322 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:26:29.322 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:26:29.324 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:26:29.434 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-19 06:26:29.488 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:26:29.848 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:26:29.933 -05:00 [ERR] Error al listar los usuarios: Keyword not supported: 'trusted_connectin'.
2024-04-19 06:26:29.965 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api) in 639.6656ms
2024-04-19 06:26:29.966 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 06:26:29.968 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentException: Keyword not supported: 'trusted_connectin'.
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder.GetIndex(String keyword)
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder.set_Item(String keyword, Object value)
   at System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value)
   at Microsoft.Data.SqlClient.SqlConnectionStringBuilder..ctor(String connectionString)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.<>c.<get_IsMultipleActiveResultSetsEnabled>b__7_0(String cs)
   at System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerConnection.get_IsMultipleActiveResultSetsEnabled()
   at Microsoft.EntityFrameworkCore.SqlServer.Query.Internal.SqlServerCompiledQueryCacheKeyGenerator.GenerateCacheKey(Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.IncludableQueryable`2.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at PruebaUser.Infraestructure.Repositories.UsuarioRepositorio.ListarUsuarios() in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Infraestructure\Repositories\UsuarioRepositorio.cs:line 57
   at PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios() in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api\Controllers\UsuarioController.cs:line 22
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-19 06:26:29.986 -05:00 [DBG] Authentication of the HTTPS connection timed out.
2024-04-19 06:26:29.995 -05:00 [DBG] Connection id "0HN30CE4J3NRA" stopped.
2024-04-19 06:26:29.996 -05:00 [DBG] Connection id "0HN30CE4J3NRA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 06:26:30.004 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:26:30.006 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 500 null text/plain; charset=utf-8 713.5205ms
2024-04-19 06:26:30.031 -05:00 [DBG] Authentication of the HTTPS connection timed out.
2024-04-19 06:26:30.031 -05:00 [DBG] Connection id "0HN30CE4J3NRB" stopped.
2024-04-19 06:26:30.032 -05:00 [DBG] Connection id "0HN30CE4J3NRB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 06:26:43.087 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 06:26:43.159 -05:00 [DBG] Hosting starting
2024-04-19 06:26:43.286 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 06:26:43.287 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 06:26:43.287 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 06:26:43.288 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 06:26:43.288 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 06:26:43.289 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 06:26:43.290 -05:00 [INF] Hosting environment: Development
2024-04-19 06:26:43.290 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 06:26:43.291 -05:00 [DBG] Hosting started
2024-04-19 06:26:43.295 -05:00 [DBG] Connection id "0HN30CEBHMR82" accepted.
2024-04-19 06:26:43.297 -05:00 [DBG] Connection id "0HN30CEBHMR82" started.
2024-04-19 06:26:43.305 -05:00 [DBG] Connection id "0HN30CEBHMR83" accepted.
2024-04-19 06:26:43.305 -05:00 [DBG] Connection id "0HN30CEBHMR83" started.
2024-04-19 06:26:43.338 -05:00 [DBG] Connection id "0HN30CEBHMR82" received FIN.
2024-04-19 06:26:43.338 -05:00 [DBG] Connection id "0HN30CEBHMR83" received FIN.
2024-04-19 06:26:43.347 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 06:26:43.347 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 06:26:43.361 -05:00 [DBG] Connection id "0HN30CEBHMR83" stopped.
2024-04-19 06:26:43.361 -05:00 [DBG] Connection id "0HN30CEBHMR82" stopped.
2024-04-19 06:26:43.365 -05:00 [DBG] Connection id "0HN30CEBHMR82" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 06:26:43.365 -05:00 [DBG] Connection id "0HN30CEBHMR83" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 06:26:43.483 -05:00 [DBG] Connection id "0HN30CEBHMR84" accepted.
2024-04-19 06:26:43.484 -05:00 [DBG] Connection id "0HN30CEBHMR84" started.
2024-04-19 06:26:43.513 -05:00 [DBG] Connection 0HN30CEBHMR84 established using the following protocol: "Tls13"
2024-04-19 06:26:43.552 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 06:26:43.616 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 06:26:43.628 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 06:26:43.629 -05:00 [DBG] Request did not match any endpoints
2024-04-19 06:26:43.692 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 06:26:43.694 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 06:26:43.705 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 06:26:43.706 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 06:26:43.708 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 157.9928ms
2024-04-19 06:26:43.717 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 06:26:43.722 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 5.4084ms
2024-04-19 06:26:43.801 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 06:26:43.839 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 37.9363ms
2024-04-19 06:26:44.329 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 06:26:44.330 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 06:26:44.331 -05:00 [DBG] Request did not match any endpoints
2024-04-19 06:26:44.401 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.1057ms
2024-04-19 06:26:47.391 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 06:26:47.396 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 06:26:47.398 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 06:26:47.399 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 06:26:47.401 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:26:47.403 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 06:26:47.414 -05:00 [INF] Route matched with {action = "ListarUsuarios", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[PruebaUser.Core.DTOs.UsuarioDTO]]] ListarUsuarios() on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:26:47.416 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:26:47.416 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:26:47.417 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:26:47.418 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:26:47.419 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:26:47.420 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:26:47.495 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-19 06:26:47.562 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:26:47.926 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:26:47.958 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Include(usuario => usuario.TipoDocumento)'
2024-04-19 06:26:48.011 -05:00 [DBG] Including navigation: 'Usuario.TipoDocumento'.
2024-04-19 06:26:48.119 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Usuario>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Apellido (string) Required, 1], [Property: Usuario.Clave (string) Required, 2], [Property: Usuario.Documento (long) Required, 3], [Property: Usuario.Email (string) Required, 4], [Property: Usuario.Nombre (string) Required, 5], [Property: Usuario.TipoDocumentoId (int) Required FK Index, 6] }
            1 -> Dictionary<IProperty, int> { [Property: TipoDocumento.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: TipoDocumento.Descripcion (string) Required, 8] }
        SELECT u.Id, u.Apellido, u.Clave, u.Documento, u.Email, u.Nombre, u.TipoDocumentoId, t.Id, t.Descripcion
        FROM Usuario AS u
        INNER JOIN TipoDocumento AS t ON u.TipoDocumentoId == t.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Usuario>, 
    PruebaUser.Infraestructure.UserDBContext, 
    False, 
    False, 
    True
)'
2024-04-19 06:26:48.139 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:26:48.151 -05:00 [DBG] Created DbConnection. (11ms).
2024-04-19 06:26:48.154 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:26:48.375 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:26:48.378 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:26:48.383 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-04-19 06:26:48.385 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2024-04-19 06:26:48.390 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
2024-04-19 06:26:48.424 -05:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
2024-04-19 06:26:48.446 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.468 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.472 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.475 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.476 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.477 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.478 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.479 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.480 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.480 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.481 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.482 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.483 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.483 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.484 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.484 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.485 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.486 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.486 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.487 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.487 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.488 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.488 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.489 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.489 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.490 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.491 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.491 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.492 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.492 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.493 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.493 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.494 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.497 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.499 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.500 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.500 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.501 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.502 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:26:48.505 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:26:48.509 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 80ms reading results.
2024-04-19 06:26:48.511 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:26:48.515 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (4ms).
2024-04-19 06:26:48.527 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:26:48.530 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:26:48.531 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-19 06:26:48.532 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 06:26:48.532 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 06:26:48.533 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 06:26:48.534 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PruebaUser.Core.DTOs.UsuarioDTO, PruebaUser.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-19 06:26:48.546 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api) in 1124.7516ms
2024-04-19 06:26:48.548 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 06:26:48.550 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:26:48.552 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:26:48.553 -05:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-19 06:26:48.554 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 200 null application/json; charset=utf-8 1162.9275ms
2024-04-19 06:27:15.604 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/usuario - application/json 155
2024-04-19 06:27:15.606 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 06:27:15.607 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 06:27:15.607 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:27:15.608 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:27:15.609 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:27:15.616 -05:00 [INF] Route matched with {action = "CrearUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] CrearUsuario(PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:27:15.617 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:27:15.618 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:27:15.618 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:27:15.619 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:27:15.620 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:27:15.620 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:27:15.622 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:27:15.630 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:27:15.633 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 06:27:15.634 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 06:27:15.638 -05:00 [DBG] Connection id "0HN30CEBHMR84", Request id "0HN30CEBHMR84:0000000B": started reading request body.
2024-04-19 06:27:15.638 -05:00 [DBG] Connection id "0HN30CEBHMR84", Request id "0HN30CEBHMR84:0000000B": done reading request body.
2024-04-19 06:27:15.642 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 06:27:15.643 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:27:15.644 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:27:15.644 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:27:15.651 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:27:15.685 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:27:15.689 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Any(usuario => usuario.Documento == __documento_0)'
2024-04-19 06:27:15.698 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Usuario AS u
                WHERE u.Documento == @__documento_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 06:27:15.706 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:27:15.706 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 06:27:15.707 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.708 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.708 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:27:15.709 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:27:15.711 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2024-04-19 06:27:15.713 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:27:15.736 -05:00 [INF] Executed DbCommand (24ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:27:15.738 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.739 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-04-19 06:27:15.740 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.740 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:27:15.747 -05:00 [DBG] Compiling query expression: 
'DbSet<TipoDocumento>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2024-04-19 06:27:15.752 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TipoDocumento>(
    asyncEnumerable: new SingleQueryingEnumerable<TipoDocumento>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TipoDocumento.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TipoDocumento.Descripcion (string) Required, 1] }
            SELECT TOP(1) t.Id, t.Descripcion
            FROM TipoDocumento AS t
            WHERE t.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TipoDocumento>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 06:27:15.754 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.755 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.755 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:27:15.756 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:27:15.756 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:27:15.757 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:27:15.759 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:27:15.760 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:27:15.761 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.762 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:27:15.762 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.763 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:27:15.779 -05:00 [DBG] 'UserDBContext' generated a temporary value for the property 'Usuario.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:27:15.785 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:27:15.788 -05:00 [DBG] SaveChanges starting for 'UserDBContext'.
2024-04-19 06:27:15.790 -05:00 [DBG] DetectChanges starting for 'UserDBContext'.
2024-04-19 06:27:15.798 -05:00 [DBG] DetectChanges completed for 'UserDBContext'.
2024-04-19 06:27:15.837 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.838 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.840 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:27:15.840 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:27:15.841 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:27:15.842 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Usuario] ([Apellido], [Clave], [Documento], [Email], [Nombre], [TipoDocumentoId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-04-19 06:27:15.845 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Usuario] ([Apellido], [Clave], [Documento], [Email], [Nombre], [TipoDocumentoId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-04-19 06:27:15.852 -05:00 [DBG] The foreign key property 'Usuario.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 06:27:15.856 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.856 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 10ms reading results.
2024-04-19 06:27:15.858 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.858 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:27:15.865 -05:00 [DBG] An entity of type 'Usuario' tracked by 'UserDBContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:27:15.867 -05:00 [DBG] SaveChanges completed for 'UserDBContext' with 1 entities written to the database.
2024-04-19 06:27:15.869 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:27:15.870 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:27:15.871 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-19 06:27:15.872 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 06:27:15.872 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 06:27:15.872 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 06:27:15.873 -05:00 [INF] Executing CreatedAtRouteResult, writing value of type 'PruebaUser.Core.DTOs.UsuarioDTO'.
2024-04-19 06:27:15.884 -05:00 [DBG] Found the endpoints ["PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)"] for address obtenerUsuario(id=[35])
2024-04-19 06:27:15.887 -05:00 [DBG] Successfully processed template api/usuario/{id} for PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api) resulting in /api/usuario/35 and 
2024-04-19 06:27:15.888 -05:00 [DBG] Link generation succeeded for endpoints ["PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)"] with result /api/usuario/35
2024-04-19 06:27:15.889 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api) in 268.2861ms
2024-04-19 06:27:15.890 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:27:15.890 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:27:15.891 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:27:15.892 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 06:27:15.892 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/usuario - 201 null application/json; charset=utf-8 288.7144ms
2024-04-19 06:28:58.783 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/usuario - application/json 158
2024-04-19 06:28:58.788 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 06:28:58.789 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 06:28:58.790 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:28:58.790 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:28:58.791 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:28:58.791 -05:00 [INF] Route matched with {action = "CrearUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] CrearUsuario(PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:28:58.792 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:28:58.793 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:28:58.794 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:28:58.795 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:28:58.795 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:28:58.796 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:28:58.799 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:28:58.801 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:28:58.802 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 06:28:58.802 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 06:28:58.803 -05:00 [DBG] Connection id "0HN30CEBHMR84", Request id "0HN30CEBHMR84:0000000D": started reading request body.
2024-04-19 06:28:58.803 -05:00 [DBG] Connection id "0HN30CEBHMR84", Request id "0HN30CEBHMR84:0000000D": done reading request body.
2024-04-19 06:28:58.804 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 06:28:58.805 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:28:58.805 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:28:58.805 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:28:58.806 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:28:58.813 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:28:58.817 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:28:58.817 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 06:28:58.818 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:28:58.818 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:28:58.819 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:28:58.819 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:28:58.820 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:28:58.820 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:28:58.823 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:28:58.824 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:28:58.824 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:28:58.825 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:28:58.825 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:28:58.827 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:28:58.827 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:28:58.828 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:28:58.828 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:28:58.829 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:28:58.829 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:28:58.831 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:28:58.832 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:28:58.833 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:28:58.833 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:28:58.834 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:28:58.834 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:28:58.835 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:28:58.836 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:28:58.837 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 06:28:58.837 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-04-19 06:28:58.838 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api) in 42.1069ms
2024-04-19 06:28:58.839 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:28:58.839 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:28:58.840 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:28:58.840 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 06:28:58.841 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/usuario - 400 null text/plain; charset=utf-8 58.0247ms
2024-04-19 06:53:59.360 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 06:53:59.414 -05:00 [DBG] Hosting starting
2024-04-19 06:53:59.546 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 06:53:59.547 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 06:53:59.548 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 06:53:59.549 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 06:53:59.549 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 06:53:59.550 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 06:53:59.551 -05:00 [INF] Hosting environment: Development
2024-04-19 06:53:59.551 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 06:53:59.552 -05:00 [DBG] Hosting started
2024-04-19 06:53:59.570 -05:00 [DBG] Connection id "0HN30CTJ6EA2F" accepted.
2024-04-19 06:53:59.570 -05:00 [DBG] Connection id "0HN30CTJ6EA2E" accepted.
2024-04-19 06:53:59.571 -05:00 [DBG] Connection id "0HN30CTJ6EA2F" started.
2024-04-19 06:53:59.571 -05:00 [DBG] Connection id "0HN30CTJ6EA2E" started.
2024-04-19 06:53:59.585 -05:00 [DBG] Connection id "0HN30CTJ6EA2E" received FIN.
2024-04-19 06:53:59.585 -05:00 [DBG] Connection id "0HN30CTJ6EA2F" received FIN.
2024-04-19 06:53:59.594 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 06:53:59.594 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 06:53:59.606 -05:00 [DBG] Connection id "0HN30CTJ6EA2E" stopped.
2024-04-19 06:53:59.606 -05:00 [DBG] Connection id "0HN30CTJ6EA2F" stopped.
2024-04-19 06:53:59.609 -05:00 [DBG] Connection id "0HN30CTJ6EA2E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 06:53:59.609 -05:00 [DBG] Connection id "0HN30CTJ6EA2F" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 06:53:59.855 -05:00 [DBG] Connection id "0HN30CTJ6EA2G" accepted.
2024-04-19 06:53:59.856 -05:00 [DBG] Connection id "0HN30CTJ6EA2G" started.
2024-04-19 06:53:59.899 -05:00 [DBG] Connection 0HN30CTJ6EA2G established using the following protocol: "Tls13"
2024-04-19 06:53:59.934 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 06:53:59.999 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 06:54:00.014 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 06:54:00.015 -05:00 [DBG] Request did not match any endpoints
2024-04-19 06:54:00.071 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 06:54:00.073 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 06:54:00.085 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 06:54:00.086 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 06:54:00.090 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 159.1592ms
2024-04-19 06:54:00.103 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 06:54:00.108 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 5.2671ms
2024-04-19 06:54:00.164 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 06:54:00.195 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 31.523ms
2024-04-19 06:54:00.650 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 06:54:00.652 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 06:54:00.652 -05:00 [DBG] Request did not match any endpoints
2024-04-19 06:54:00.727 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 77.086ms
2024-04-19 06:54:16.530 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/usuario - application/json 155
2024-04-19 06:54:16.534 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 06:54:16.536 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 06:54:16.537 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:54:16.539 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:54:16.541 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:54:16.557 -05:00 [INF] Route matched with {action = "CrearUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] CrearUsuario(PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:54:16.559 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:54:16.560 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:54:16.560 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:54:16.561 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:54:16.562 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:54:16.564 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:54:16.635 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-19 06:54:16.693 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:54:16.701 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:54:16.703 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 06:54:16.705 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 06:54:16.711 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:00000009": started reading request body.
2024-04-19 06:54:16.712 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:00000009": done reading request body.
2024-04-19 06:54:16.717 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 06:54:16.718 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:54:16.719 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:54:16.719 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:54:16.726 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:54:17.116 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:54:17.167 -05:00 [DBG] Compiling query expression: 
'DbSet<TipoDocumento>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2024-04-19 06:54:17.299 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TipoDocumento>(
    asyncEnumerable: new SingleQueryingEnumerable<TipoDocumento>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TipoDocumento.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TipoDocumento.Descripcion (string) Required, 1] }
            SELECT TOP(1) t.Id, t.Descripcion
            FROM TipoDocumento AS t
            WHERE t.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TipoDocumento>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 06:54:17.322 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:54:17.335 -05:00 [DBG] Created DbConnection. (11ms).
2024-04-19 06:54:17.337 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.501 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.504 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:17.509 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-04-19 06:54:17.514 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-04-19 06:54:17.521 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:54:17.556 -05:00 [INF] Executed DbCommand (38ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:54:17.564 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.570 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 9ms reading results.
2024-04-19 06:54:17.572 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.576 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (3ms).
2024-04-19 06:54:17.579 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Any(usuario => usuario.Documento == __documento_0)'
2024-04-19 06:54:17.587 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Usuario AS u
                WHERE u.Documento == @__documento_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 06:54:17.593 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.595 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.595 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:17.596 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:17.597 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:54:17.598 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:17.604 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:17.609 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.609 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 4ms reading results.
2024-04-19 06:54:17.610 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.611 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:54:17.613 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Any(usuario => usuario.Email == __emailNuevo_0 && True)'
2024-04-19 06:54:17.617 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Usuario AS u
                WHERE (u.Email == @__emailNuevo_0) && CAST(1 AS bit))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 06:54:17.619 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.620 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.621 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:17.621 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:17.622 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:54:17.623 -05:00 [DBG] Executing DbCommand [Parameters=[@__emailNuevo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:17.627 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__emailNuevo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:17.628 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.629 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:54:17.630 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.631 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:54:17.635 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:54:17.638 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:54:17.639 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 06:54:17.639 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-04-19 06:54:17.643 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api) in 1078.3302ms
2024-04-19 06:54:17.644 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:54:17.646 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:54:17.649 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:17.651 -05:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-19 06:54:17.652 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/usuario - 400 null text/plain; charset=utf-8 1122.2549ms
2024-04-19 06:54:26.092 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/usuario - application/json 155
2024-04-19 06:54:26.094 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 06:54:26.094 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 06:54:26.095 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:54:26.096 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:54:26.097 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:54:26.098 -05:00 [INF] Route matched with {action = "CrearUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] CrearUsuario(PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:54:26.099 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:54:26.100 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:54:26.100 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:54:26.101 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:54:26.102 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:54:26.103 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:54:26.104 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:54:26.105 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:54:26.106 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 06:54:26.107 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 06:54:26.107 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:0000000B": started reading request body.
2024-04-19 06:54:26.108 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:0000000B": done reading request body.
2024-04-19 06:54:26.109 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 06:54:26.109 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:54:26.110 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:54:26.110 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:54:26.111 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:54:26.144 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:54:26.148 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:54:26.149 -05:00 [DBG] Created DbConnection. (1ms).
2024-04-19 06:54:26.150 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.151 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.151 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:26.152 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:26.153 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:54:26.153 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:54:26.155 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:54:26.177 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:54:26.186 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.187 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 30ms reading results.
2024-04-19 06:54:26.188 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.188 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:54:26.189 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.191 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.191 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:26.192 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:26.193 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:54:26.193 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:26.195 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:26.196 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.197 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:54:26.198 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.198 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:54:26.200 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.200 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.201 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:26.202 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:26.202 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:54:26.203 -05:00 [DBG] Executing DbCommand [Parameters=[@__emailNuevo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:26.205 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__emailNuevo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:26.206 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.206 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:54:26.207 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.208 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:54:26.209 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:54:26.210 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:54:26.211 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 06:54:26.211 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-04-19 06:54:26.212 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api) in 109.394ms
2024-04-19 06:54:26.213 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:54:26.214 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:54:26.214 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:26.215 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 06:54:26.216 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/usuario - 400 null text/plain; charset=utf-8 124.5905ms
2024-04-19 06:54:37.794 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/usuario - application/json 155
2024-04-19 06:54:37.795 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 06:54:37.796 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 06:54:37.797 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:54:37.798 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:54:37.798 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:54:37.799 -05:00 [INF] Route matched with {action = "CrearUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] CrearUsuario(PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:54:37.800 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:54:37.801 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:54:37.801 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:54:37.803 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:54:37.804 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:54:37.805 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:54:37.807 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:54:37.808 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:54:37.808 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 06:54:37.809 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 06:54:37.810 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:0000000D": started reading request body.
2024-04-19 06:54:37.810 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:0000000D": done reading request body.
2024-04-19 06:54:37.811 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 06:54:37.812 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:54:37.812 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:54:37.813 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:54:37.813 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:54:37.820 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:54:37.822 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:54:37.823 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 06:54:37.823 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.824 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.824 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:37.825 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:37.825 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:54:37.826 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:54:37.828 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:54:37.829 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:54:37.830 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.830 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:54:37.831 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.832 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:54:37.833 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.833 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.834 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:37.835 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:37.835 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:54:37.836 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:37.837 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:37.838 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.839 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:54:37.839 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.840 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:54:37.841 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.841 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.842 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:37.842 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:37.843 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:54:37.843 -05:00 [DBG] Executing DbCommand [Parameters=[@__emailNuevo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:37.845 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__emailNuevo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:37.846 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.846 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:54:37.847 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.848 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:54:37.849 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:54:37.850 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:54:37.851 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 06:54:37.851 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-04-19 06:54:37.852 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api) in 47.3072ms
2024-04-19 06:54:37.853 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:54:37.853 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:54:37.854 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:37.855 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 06:54:37.855 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/usuario - 400 null text/plain; charset=utf-8 61.8325ms
2024-04-19 06:54:45.954 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/usuario - application/json 158
2024-04-19 06:54:45.956 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 06:54:45.956 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 06:54:45.957 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:54:45.958 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:54:45.958 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:54:45.959 -05:00 [INF] Route matched with {action = "CrearUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] CrearUsuario(PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:54:45.959 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:54:45.960 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:54:45.961 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:54:45.962 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:54:45.963 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:54:45.963 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:54:45.964 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:54:45.965 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:54:45.966 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 06:54:45.967 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 06:54:45.967 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:0000000F": started reading request body.
2024-04-19 06:54:45.968 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:0000000F": done reading request body.
2024-04-19 06:54:45.968 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 06:54:45.969 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:54:45.969 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:54:45.970 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:54:45.970 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:54:45.971 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:54:45.972 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:54:45.973 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 06:54:45.973 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:45.974 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:45.975 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:45.975 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:45.976 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:54:45.976 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:54:45.979 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:54:45.980 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:54:45.981 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:45.981 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:54:45.982 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:45.983 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:54:45.984 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:45.984 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:45.985 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:45.985 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:45.986 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:45.986 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:45.989 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:45.990 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:45.990 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:54:45.991 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:45.991 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:54:45.992 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:45.993 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:45.993 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:45.994 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:45.994 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:45.994 -05:00 [DBG] Executing DbCommand [Parameters=[@__emailNuevo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:45.996 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__emailNuevo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:54:45.997 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:45.998 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:54:45.999 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:45.999 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:54:46.020 -05:00 [DBG] 'UserDBContext' generated a temporary value for the property 'Usuario.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:54:46.041 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:54:46.044 -05:00 [DBG] SaveChanges starting for 'UserDBContext'.
2024-04-19 06:54:46.045 -05:00 [DBG] DetectChanges starting for 'UserDBContext'.
2024-04-19 06:54:46.054 -05:00 [DBG] DetectChanges completed for 'UserDBContext'.
2024-04-19 06:54:46.097 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:46.098 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:46.101 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:54:46.101 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:54:46.102 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:54:46.102 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Usuario] ([Apellido], [Clave], [Documento], [Email], [Nombre], [TipoDocumentoId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-04-19 06:54:46.105 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Usuario] ([Apellido], [Clave], [Documento], [Email], [Nombre], [TipoDocumentoId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-04-19 06:54:46.113 -05:00 [DBG] The foreign key property 'Usuario.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 06:54:46.117 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:46.118 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 11ms reading results.
2024-04-19 06:54:46.119 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:46.120 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:54:46.126 -05:00 [DBG] An entity of type 'Usuario' tracked by 'UserDBContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:54:46.128 -05:00 [DBG] SaveChanges completed for 'UserDBContext' with 1 entities written to the database.
2024-04-19 06:54:46.132 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:54:46.133 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:54:46.134 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-19 06:54:46.135 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 06:54:46.135 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 06:54:46.136 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 06:54:46.136 -05:00 [INF] Executing CreatedAtRouteResult, writing value of type 'PruebaUser.Core.DTOs.UsuarioDTO'.
2024-04-19 06:54:46.147 -05:00 [DBG] Found the endpoints ["PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)"] for address obtenerUsuario(id=[36])
2024-04-19 06:54:46.152 -05:00 [DBG] Successfully processed template api/usuario/{id} for PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api) resulting in /api/usuario/36 and 
2024-04-19 06:54:46.154 -05:00 [DBG] Link generation succeeded for endpoints ["PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)"] with result /api/usuario/36
2024-04-19 06:54:46.160 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api) in 196.0554ms
2024-04-19 06:54:46.160 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 06:54:46.161 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:54:46.162 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:54:46.162 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 06:54:46.163 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/usuario - 201 null application/json; charset=utf-8 208.8957ms
2024-04-19 06:56:31.704 -05:00 [INF] Request starting HTTP/2 PUT https://localhost:7041/api/usuario/19 - application/json 153
2024-04-19 06:56:31.706 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/19'
2024-04-19 06:56:31.706 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/19'
2024-04-19 06:56:31.707 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:56:31.708 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:56:31.708 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:56:31.712 -05:00 [INF] Route matched with {action = "ActualizarUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] ActualizarUsuario(Int32, PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:56:31.713 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:56:31.713 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:56:31.714 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:56:31.715 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:56:31.716 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:56:31.716 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:56:31.717 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:56:31.718 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-19 06:56:31.719 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-19 06:56:31.720 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 06:56:31.721 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 06:56:31.721 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-19 06:56:31.722 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-19 06:56:31.723 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:56:31.723 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 06:56:31.724 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 06:56:31.725 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:00000011": started reading request body.
2024-04-19 06:56:31.725 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:00000011": done reading request body.
2024-04-19 06:56:31.726 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 06:56:31.726 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:56:31.727 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:56:31.727 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:56:31.728 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:56:31.731 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:56:31.732 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2024-04-19 06:56:31.736 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: new SingleQueryingEnumerable<Usuario>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Apellido (string) Required, 1], [Property: Usuario.Clave (string) Required, 2], [Property: Usuario.Documento (long) Required, 3], [Property: Usuario.Email (string) Required, 4], [Property: Usuario.Nombre (string) Required, 5], [Property: Usuario.TipoDocumentoId (int) Required FK Index, 6] }
            SELECT TOP(1) u.Id, u.Apellido, u.Clave, u.Documento, u.Email, u.Nombre, u.TipoDocumentoId
            FROM Usuario AS u
            WHERE u.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Usuario>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 06:56:31.737 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:56:31.738 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 06:56:31.738 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.739 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.739 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:56:31.740 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:31.740 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:56:31.741 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 06:56:31.743 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 06:56:31.745 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:56:31.745 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.746 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:56:31.747 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.747 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:56:31.748 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.749 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.750 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:56:31.750 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:31.751 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:56:31.752 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:56:31.754 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:56:31.758 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:56:31.760 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:56:31.760 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.761 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 6ms reading results.
2024-04-19 06:56:31.761 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.762 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:56:31.763 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.763 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.764 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:56:31.765 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:31.765 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:56:31.766 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:56:31.768 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:56:31.769 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.770 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:56:31.771 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.771 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:56:31.772 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Any(usuario => usuario.Email == __emailNuevo_0 && False || (int?)usuario.Id != __idUsuarioActualizar_1)'
2024-04-19 06:56:31.774 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Usuario AS u
                WHERE (u.Email == @__emailNuevo_0) && (CAST(0 AS bit) || (u.Id != @__idUsuarioActualizar_1)))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 06:56:31.776 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.777 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.777 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:56:31.778 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:31.778 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:31.779 -05:00 [DBG] Executing DbCommand [Parameters=[@__emailNuevo_0='?' (Size = 4000), @__idUsuarioActualizar_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0 AND [u].[Id] <> @__idUsuarioActualizar_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:56:31.782 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__emailNuevo_0='?' (Size = 4000), @__idUsuarioActualizar_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0 AND [u].[Id] <> @__idUsuarioActualizar_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:56:31.783 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.784 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:56:31.784 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.785 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:56:31.786 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:56:31.787 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:56:31.788 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 06:56:31.788 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-04-19 06:56:31.789 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api) in 72.5107ms
2024-04-19 06:56:31.793 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:56:31.793 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:56:31.794 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:31.794 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 06:56:31.795 -05:00 [INF] Request finished HTTP/2 PUT https://localhost:7041/api/usuario/19 - 400 null text/plain; charset=utf-8 93.7869ms
2024-04-19 06:56:46.921 -05:00 [INF] Request starting HTTP/2 PUT https://localhost:7041/api/usuario/19 - application/json 153
2024-04-19 06:56:46.923 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/19'
2024-04-19 06:56:46.923 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/19'
2024-04-19 06:56:46.924 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:56:46.925 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:56:46.925 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:56:46.926 -05:00 [INF] Route matched with {action = "ActualizarUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] ActualizarUsuario(Int32, PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:56:46.927 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:56:46.928 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:56:46.928 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:56:46.929 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:56:46.930 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:56:46.930 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:56:46.931 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:56:46.932 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-19 06:56:46.933 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-19 06:56:46.934 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 06:56:46.934 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 06:56:46.935 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-19 06:56:46.935 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-19 06:56:46.936 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:56:46.937 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 06:56:46.937 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 06:56:46.938 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:00000013": started reading request body.
2024-04-19 06:56:46.939 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:00000013": done reading request body.
2024-04-19 06:56:46.939 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 06:56:46.940 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:56:46.941 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:56:46.941 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:56:46.942 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:56:46.943 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:56:46.944 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:56:46.945 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 06:56:46.945 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.946 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.947 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:56:46.947 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:46.948 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:56:46.949 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 06:56:46.951 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 06:56:46.956 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:56:46.957 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.957 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:56:46.958 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.959 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:56:46.960 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.960 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.961 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:56:46.962 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:46.962 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:56:46.963 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:56:46.964 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:56:46.966 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:56:46.966 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.967 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:56:46.968 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.968 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:56:46.969 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.970 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.971 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:56:46.971 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:46.972 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:56:46.972 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:56:46.974 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:56:46.975 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.976 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:56:46.976 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.977 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:56:46.978 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.978 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.979 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:56:46.979 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:46.980 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:56:46.981 -05:00 [DBG] Executing DbCommand [Parameters=[@__emailNuevo_0='?' (Size = 4000), @__idUsuarioActualizar_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0 AND [u].[Id] <> @__idUsuarioActualizar_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:56:46.982 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__emailNuevo_0='?' (Size = 4000), @__idUsuarioActualizar_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0 AND [u].[Id] <> @__idUsuarioActualizar_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:56:46.983 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.984 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:56:46.985 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.986 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:56:46.987 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:56:46.988 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:56:46.988 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 06:56:46.989 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-04-19 06:56:46.990 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api) in 59.313ms
2024-04-19 06:56:46.990 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:56:46.991 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:56:46.992 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:46.992 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 06:56:46.993 -05:00 [INF] Request finished HTTP/2 PUT https://localhost:7041/api/usuario/19 - 400 null text/plain; charset=utf-8 72.1642ms
2024-04-19 06:56:52.669 -05:00 [INF] Request starting HTTP/2 PUT https://localhost:7041/api/usuario/19 - application/json 156
2024-04-19 06:56:52.670 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/19'
2024-04-19 06:56:52.671 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/19'
2024-04-19 06:56:52.672 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:56:52.672 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:56:52.673 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:56:52.673 -05:00 [INF] Route matched with {action = "ActualizarUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] ActualizarUsuario(Int32, PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:56:52.674 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:56:52.675 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:56:52.676 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:56:52.677 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:56:52.677 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:56:52.678 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:56:52.679 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:56:52.680 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-19 06:56:52.681 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-19 06:56:52.681 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 06:56:52.682 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 06:56:52.683 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-19 06:56:52.683 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-19 06:56:52.684 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:56:52.685 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 06:56:52.685 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 06:56:52.686 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:00000015": started reading request body.
2024-04-19 06:56:52.687 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:00000015": done reading request body.
2024-04-19 06:56:52.687 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 06:56:52.688 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:56:52.688 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:56:52.689 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:56:52.689 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:56:52.690 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:56:52.692 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:56:52.692 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 06:56:52.692 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.693 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.694 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:56:52.694 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:52.695 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:56:52.695 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 06:56:52.698 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 06:56:52.699 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:56:52.700 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.700 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:56:52.701 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.702 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:56:52.703 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.703 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.704 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:56:52.705 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:52.705 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:56:52.706 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:56:52.708 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:56:52.709 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:56:52.710 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.710 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:56:52.711 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.711 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:56:52.712 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.713 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.714 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:56:52.714 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:52.715 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:56:52.715 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:56:52.718 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:56:52.719 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.720 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:56:52.721 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.721 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:56:52.722 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.723 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.723 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:56:52.724 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:56:52.724 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:56:52.725 -05:00 [DBG] Executing DbCommand [Parameters=[@__emailNuevo_0='?' (Size = 4000), @__idUsuarioActualizar_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0 AND [u].[Id] <> @__idUsuarioActualizar_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:56:52.728 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__emailNuevo_0='?' (Size = 4000), @__idUsuarioActualizar_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0 AND [u].[Id] <> @__idUsuarioActualizar_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:56:52.729 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.729 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:56:52.730 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.731 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:56:52.732 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:56:52.733 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:56:52.734 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 06:56:52.734 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-04-19 06:56:52.735 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api) in 56.8908ms
2024-04-19 06:56:52.736 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:56:52.737 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:56:52.737 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:56:52.738 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 06:56:52.738 -05:00 [INF] Request finished HTTP/2 PUT https://localhost:7041/api/usuario/19 - 400 null text/plain; charset=utf-8 70.0971ms
2024-04-19 06:57:17.878 -05:00 [INF] Request starting HTTP/2 PUT https://localhost:7041/api/usuario/36 - application/json 156
2024-04-19 06:57:17.882 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/36'
2024-04-19 06:57:17.883 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/36'
2024-04-19 06:57:17.884 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:57:17.884 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:57:17.885 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:57:17.885 -05:00 [INF] Route matched with {action = "ActualizarUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] ActualizarUsuario(Int32, PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:57:17.886 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:57:17.887 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:57:17.888 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:57:17.889 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:57:17.889 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:57:17.890 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:57:17.891 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:57:17.892 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-19 06:57:17.892 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-19 06:57:17.893 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 06:57:17.894 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 06:57:17.894 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-19 06:57:17.895 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-19 06:57:17.895 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:57:17.896 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 06:57:17.897 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 06:57:17.897 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:00000017": started reading request body.
2024-04-19 06:57:17.898 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:00000017": done reading request body.
2024-04-19 06:57:17.899 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 06:57:17.899 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:57:17.900 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:57:17.901 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:57:17.901 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:57:17.903 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:57:17.904 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:57:17.904 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 06:57:17.905 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.906 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.907 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:57:17.907 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:57:17.908 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:57:17.908 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 06:57:17.910 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 06:57:17.911 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:57:17.912 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.913 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:57:17.913 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.914 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:57:17.915 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.916 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.916 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:57:17.917 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:57:17.917 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:57:17.918 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:57:17.920 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:57:17.921 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:57:17.922 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.923 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:57:17.924 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.924 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:57:17.925 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.926 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.926 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:57:17.927 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:57:17.928 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:57:17.928 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:57:17.930 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:57:17.931 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.932 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:57:17.933 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.934 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:57:17.935 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:57:17.936 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:57:17.937 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 06:57:17.938 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2024-04-19 06:57:17.938 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api) in 48.268ms
2024-04-19 06:57:17.941 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:57:17.943 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:57:17.943 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:17.944 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 06:57:17.945 -05:00 [INF] Request finished HTTP/2 PUT https://localhost:7041/api/usuario/36 - 400 null text/plain; charset=utf-8 66.2595ms
2024-04-19 06:57:42.377 -05:00 [INF] Request starting HTTP/2 PUT https://localhost:7041/api/usuario/36 - application/json 156
2024-04-19 06:57:42.382 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/36'
2024-04-19 06:57:42.383 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/36'
2024-04-19 06:57:42.384 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:57:42.385 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:57:42.385 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:57:42.386 -05:00 [INF] Route matched with {action = "ActualizarUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] ActualizarUsuario(Int32, PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:57:42.387 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:57:42.388 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:57:42.389 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:57:42.390 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:57:42.391 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:57:42.391 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:57:42.392 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:57:42.393 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-19 06:57:42.393 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-19 06:57:42.394 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 06:57:42.395 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 06:57:42.395 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-19 06:57:42.396 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-19 06:57:42.396 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:57:42.397 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 06:57:42.398 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 06:57:42.398 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:00000019": started reading request body.
2024-04-19 06:57:42.399 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:00000019": done reading request body.
2024-04-19 06:57:42.400 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 06:57:42.400 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:57:42.401 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:57:42.401 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:57:42.402 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:57:42.403 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:57:42.404 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:57:42.405 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 06:57:42.405 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.406 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.406 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:57:42.406 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:57:42.407 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:57:42.407 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 06:57:42.409 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 06:57:42.410 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:57:42.411 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.412 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:57:42.412 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.413 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:57:42.414 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.415 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.416 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:57:42.416 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:57:42.417 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:57:42.417 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:57:42.419 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:57:42.420 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:57:42.421 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.421 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:57:42.422 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.422 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:57:42.423 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.424 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.425 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:57:42.425 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:57:42.425 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:57:42.426 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:57:42.427 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:57:42.428 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.429 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:57:42.430 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.430 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:57:42.431 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.432 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.432 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:57:42.433 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:57:42.433 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:57:42.434 -05:00 [DBG] Executing DbCommand [Parameters=[@__emailNuevo_0='?' (Size = 4000), @__idUsuarioActualizar_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0 AND [u].[Id] <> @__idUsuarioActualizar_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:57:42.437 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__emailNuevo_0='?' (Size = 4000), @__idUsuarioActualizar_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0 AND [u].[Id] <> @__idUsuarioActualizar_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:57:42.438 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.438 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:57:42.439 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.440 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:57:42.440 -05:00 [DBG] SaveChanges starting for 'UserDBContext'.
2024-04-19 06:57:42.441 -05:00 [DBG] DetectChanges starting for 'UserDBContext'.
2024-04-19 06:57:42.442 -05:00 [DBG] The unchanged property 'Usuario.Apellido' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 06:57:42.443 -05:00 [DBG] An entity of type 'Usuario' tracked by 'UserDBContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:57:42.444 -05:00 [DBG] The unchanged property 'Usuario.Documento' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 06:57:42.444 -05:00 [DBG] The unchanged property 'Usuario.Nombre' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 06:57:42.445 -05:00 [DBG] The unchanged property 'Usuario.TipoDocumentoId' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 06:57:42.445 -05:00 [DBG] The foreign key property 'Usuario.TipoDocumentoId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 06:57:42.447 -05:00 [DBG] DetectChanges completed for 'UserDBContext'.
2024-04-19 06:57:42.450 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.451 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.452 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:57:42.452 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:57:42.453 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:57:42.453 -05:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int64), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Usuario] SET [Apellido] = @p0, [Documento] = @p1, [Nombre] = @p2, [TipoDocumentoId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2024-04-19 06:57:42.456 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int64), @p2='?' (Size = 4000), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Usuario] SET [Apellido] = @p0, [Documento] = @p1, [Nombre] = @p2, [TipoDocumentoId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2024-04-19 06:57:42.458 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.458 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:57:42.459 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.459 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:57:42.460 -05:00 [DBG] An entity of type 'Usuario' tracked by 'UserDBContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:57:42.461 -05:00 [DBG] SaveChanges completed for 'UserDBContext' with 1 entities written to the database.
2024-04-19 06:57:42.462 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:57:42.463 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:57:42.463 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-19 06:57:42.464 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 06:57:42.464 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 06:57:42.464 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 06:57:42.465 -05:00 [INF] Executing OkObjectResult, writing value of type 'PruebaUser.Core.DTOs.UsuarioDTO'.
2024-04-19 06:57:42.466 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api) in 74.6287ms
2024-04-19 06:57:42.466 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:57:42.467 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:57:42.468 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:57:42.468 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 06:57:42.469 -05:00 [INF] Request finished HTTP/2 PUT https://localhost:7041/api/usuario/36 - 200 null application/json; charset=utf-8 91.7226ms
2024-04-19 06:58:21.110 -05:00 [INF] Request starting HTTP/2 PUT https://localhost:7041/api/usuario/36 - application/json 156
2024-04-19 06:58:21.116 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/36'
2024-04-19 06:58:21.118 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/36'
2024-04-19 06:58:21.119 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:58:21.120 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 06:58:21.120 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:58:21.121 -05:00 [INF] Route matched with {action = "ActualizarUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] ActualizarUsuario(Int32, PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 06:58:21.121 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 06:58:21.122 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 06:58:21.123 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 06:58:21.124 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 06:58:21.124 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 06:58:21.125 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:58:21.126 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 06:58:21.127 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-19 06:58:21.127 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-19 06:58:21.128 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 06:58:21.128 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 06:58:21.129 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-19 06:58:21.130 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-19 06:58:21.130 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:58:21.131 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 06:58:21.131 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 06:58:21.132 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:0000001B": started reading request body.
2024-04-19 06:58:21.133 -05:00 [DBG] Connection id "0HN30CTJ6EA2G", Request id "0HN30CTJ6EA2G:0000001B": done reading request body.
2024-04-19 06:58:21.133 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 06:58:21.134 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:58:21.134 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:58:21.135 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 06:58:21.136 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 06:58:21.137 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 06:58:21.138 -05:00 [DBG] Creating DbConnection.
2024-04-19 06:58:21.138 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 06:58:21.139 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.140 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.140 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:58:21.141 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:58:21.141 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:58:21.142 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 06:58:21.145 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 06:58:21.146 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:58:21.147 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.147 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:58:21.148 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.148 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:58:21.149 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.150 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.151 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:58:21.151 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:58:21.152 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 06:58:21.152 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:58:21.154 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 06:58:21.155 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:58:21.155 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.156 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 06:58:21.157 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.157 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:58:21.158 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.158 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.159 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:58:21.159 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:58:21.160 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:58:21.160 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:58:21.162 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:58:21.163 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.163 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:58:21.164 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.165 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:58:21.166 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.167 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.167 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:58:21.168 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:58:21.168 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:58:21.169 -05:00 [DBG] Executing DbCommand [Parameters=[@__emailNuevo_0='?' (Size = 4000), @__idUsuarioActualizar_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0 AND [u].[Id] <> @__idUsuarioActualizar_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:58:21.171 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__emailNuevo_0='?' (Size = 4000), @__idUsuarioActualizar_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0 AND [u].[Id] <> @__idUsuarioActualizar_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 06:58:21.172 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.172 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:58:21.173 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.174 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:58:21.174 -05:00 [DBG] SaveChanges starting for 'UserDBContext'.
2024-04-19 06:58:21.175 -05:00 [DBG] DetectChanges starting for 'UserDBContext'.
2024-04-19 06:58:21.175 -05:00 [DBG] The unchanged property 'Usuario.Documento' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 06:58:21.176 -05:00 [DBG] An entity of type 'Usuario' tracked by 'UserDBContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:58:21.176 -05:00 [DBG] The unchanged property 'Usuario.TipoDocumentoId' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 06:58:21.177 -05:00 [DBG] The foreign key property 'Usuario.TipoDocumentoId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 06:58:21.177 -05:00 [DBG] DetectChanges completed for 'UserDBContext'.
2024-04-19 06:58:21.178 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.179 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.179 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 06:58:21.180 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:58:21.180 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 06:58:21.181 -05:00 [DBG] Executing DbCommand [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int64), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Usuario] SET [Documento] = @p0, [TipoDocumentoId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2024-04-19 06:58:21.183 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (DbType = Int64), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Usuario] SET [Documento] = @p0, [TipoDocumentoId] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2024-04-19 06:58:21.184 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.184 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 06:58:21.185 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.186 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 06:58:21.186 -05:00 [DBG] An entity of type 'Usuario' tracked by 'UserDBContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 06:58:21.187 -05:00 [DBG] SaveChanges completed for 'UserDBContext' with 1 entities written to the database.
2024-04-19 06:58:21.187 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 06:58:21.188 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 06:58:21.189 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-19 06:58:21.189 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 06:58:21.190 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 06:58:21.190 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 06:58:21.191 -05:00 [INF] Executing OkObjectResult, writing value of type 'PruebaUser.Core.DTOs.UsuarioDTO'.
2024-04-19 06:58:21.191 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api) in 66.2944ms
2024-04-19 06:58:21.192 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 06:58:21.192 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 06:58:21.195 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 06:58:21.196 -05:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-19 06:58:21.197 -05:00 [INF] Request finished HTTP/2 PUT https://localhost:7041/api/usuario/36 - 200 null application/json; charset=utf-8 87.341ms
2024-04-19 08:41:10.184 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 08:41:10.247 -05:00 [DBG] Hosting starting
2024-04-19 08:41:10.270 -05:00 [INF] User profile is available. Using 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-19 08:41:10.278 -05:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2024-04-19 08:41:10.278 -05:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2024-04-19 08:41:10.280 -05:00 [INF] Creating key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with creation date 2024-04-19 13:41:10Z, activation date 2024-04-19 13:41:10Z, and expiration date 2024-07-18 13:41:10Z.
2024-04-19 08:41:10.286 -05:00 [DBG] Descriptor deserializer type for key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2024-04-19 08:41:10.288 -05:00 [DBG] No key escrow sink found. Not writing key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} to escrow.
2024-04-19 08:41:10.291 -05:00 [DBG] Encrypting to Windows DPAPI for current user account (MONODEV\Migue).
2024-04-19 08:41:10.296 -05:00 [INF] Writing data to file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 08:41:10.297 -05:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2024-04-19 08:41:10.298 -05:00 [DBG] Reading data from file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 08:41:10.314 -05:00 [DBG] Found key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2}.
2024-04-19 08:41:10.317 -05:00 [DBG] Considering key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with expiration date 2024-07-18 13:41:10Z as default key.
2024-04-19 08:41:10.319 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:41:10.320 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-19 08:41:10.321 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:41:10.323 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-19 08:41:10.324 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-19 08:41:10.325 -05:00 [DBG] Using key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} as the default key.
2024-04-19 08:41:10.326 -05:00 [DBG] Key ring with default key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} was loaded during application startup.
2024-04-19 08:41:10.457 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 08:41:10.457 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 08:41:10.458 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 08:41:10.458 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 08:41:10.459 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 08:41:10.460 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 08:41:10.460 -05:00 [INF] Hosting environment: Development
2024-04-19 08:41:10.461 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 08:41:10.461 -05:00 [DBG] Hosting started
2024-04-19 08:41:10.633 -05:00 [DBG] Connection id "0HN30EPFPR16D" accepted.
2024-04-19 08:41:10.635 -05:00 [DBG] Connection id "0HN30EPFPR16D" started.
2024-04-19 08:41:10.643 -05:00 [DBG] Connection id "0HN30EPFPR16E" accepted.
2024-04-19 08:41:10.647 -05:00 [DBG] Connection id "0HN30EPFPR16E" started.
2024-04-19 08:41:10.648 -05:00 [DBG] Connection id "0HN30EPFPR16E" received FIN.
2024-04-19 08:41:10.648 -05:00 [DBG] Connection id "0HN30EPFPR16D" received FIN.
2024-04-19 08:41:10.653 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:41:10.653 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:41:10.670 -05:00 [DBG] Connection id "0HN30EPFPR16E" stopped.
2024-04-19 08:41:10.670 -05:00 [DBG] Connection id "0HN30EPFPR16D" stopped.
2024-04-19 08:41:10.672 -05:00 [DBG] Connection id "0HN30EPFPR16D" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:41:10.672 -05:00 [DBG] Connection id "0HN30EPFPR16E" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:41:10.897 -05:00 [DBG] Connection id "0HN30EPFPR16F" accepted.
2024-04-19 08:41:10.898 -05:00 [DBG] Connection id "0HN30EPFPR16F" started.
2024-04-19 08:41:10.925 -05:00 [DBG] Connection 0HN30EPFPR16F established using the following protocol: "Tls13"
2024-04-19 08:41:10.966 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 08:41:11.041 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 08:41:11.053 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 08:41:11.054 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:41:11.108 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 08:41:11.109 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 08:41:11.122 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 08:41:11.123 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 08:41:11.126 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 162.9516ms
2024-04-19 08:41:11.214 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 08:41:11.214 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 08:41:11.222 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 8.1446ms
2024-04-19 08:41:11.248 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 33.9587ms
2024-04-19 08:41:11.693 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 08:41:11.694 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 08:41:11.695 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:41:11.770 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 77.3263ms
2024-04-19 08:41:19.596 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 08:41:19.604 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 08:41:19.607 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 08:41:19.608 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:41:19.610 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:41:19.745 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:41:19.748 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 08:41:19.751 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 08:41:19.755 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 08:41:19.755 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 401 0 null 160.2808ms
2024-04-19 08:41:45.417 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario/1 - null null
2024-04-19 08:41:45.419 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/1'
2024-04-19 08:41:45.420 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/1'
2024-04-19 08:41:45.421 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)'
2024-04-19 08:41:45.422 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:41:45.423 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:41:45.424 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 08:41:45.425 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 08:41:45.426 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 08:41:45.426 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario/1 - 401 0 null 9.1018ms
2024-04-19 08:42:42.086 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 08:42:42.144 -05:00 [DBG] Hosting starting
2024-04-19 08:42:42.161 -05:00 [INF] User profile is available. Using 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-19 08:42:42.166 -05:00 [DBG] Reading data from file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 08:42:42.172 -05:00 [DBG] Found key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2}.
2024-04-19 08:42:42.177 -05:00 [DBG] Considering key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with expiration date 2024-07-18 13:41:10Z as default key.
2024-04-19 08:42:42.179 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:42:42.180 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-19 08:42:42.181 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:42:42.183 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-19 08:42:42.184 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-19 08:42:42.185 -05:00 [DBG] Using key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} as the default key.
2024-04-19 08:42:42.186 -05:00 [DBG] Key ring with default key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} was loaded during application startup.
2024-04-19 08:42:42.285 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 08:42:42.285 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 08:42:42.286 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 08:42:42.286 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 08:42:42.287 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 08:42:42.287 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 08:42:42.288 -05:00 [INF] Hosting environment: Development
2024-04-19 08:42:42.288 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 08:42:42.288 -05:00 [DBG] Hosting started
2024-04-19 08:42:42.356 -05:00 [DBG] Connection id "0HN30EQB4IJEB" accepted.
2024-04-19 08:42:42.356 -05:00 [DBG] Connection id "0HN30EQB4IJEA" accepted.
2024-04-19 08:42:42.357 -05:00 [DBG] Connection id "0HN30EQB4IJEB" started.
2024-04-19 08:42:42.357 -05:00 [DBG] Connection id "0HN30EQB4IJEA" started.
2024-04-19 08:42:42.366 -05:00 [DBG] Connection id "0HN30EQB4IJEA" received FIN.
2024-04-19 08:42:42.366 -05:00 [DBG] Connection id "0HN30EQB4IJEB" received FIN.
2024-04-19 08:42:42.374 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:42:42.374 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:42:42.385 -05:00 [DBG] Connection id "0HN30EQB4IJEB" stopped.
2024-04-19 08:42:42.385 -05:00 [DBG] Connection id "0HN30EQB4IJEA" stopped.
2024-04-19 08:42:42.386 -05:00 [DBG] Connection id "0HN30EQB4IJEB" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:42:42.386 -05:00 [DBG] Connection id "0HN30EQB4IJEA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:42:42.513 -05:00 [DBG] Connection id "0HN30EQB4IJEC" accepted.
2024-04-19 08:42:42.514 -05:00 [DBG] Connection id "0HN30EQB4IJEC" started.
2024-04-19 08:42:42.538 -05:00 [DBG] Connection 0HN30EQB4IJEC established using the following protocol: "Tls13"
2024-04-19 08:42:42.569 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 08:42:42.625 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 08:42:42.639 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 08:42:42.640 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:42:42.692 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 08:42:42.693 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 08:42:42.703 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 08:42:42.704 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 08:42:42.707 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 140.0383ms
2024-04-19 08:42:42.714 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 08:42:42.718 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 4.3437ms
2024-04-19 08:42:42.780 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 08:42:42.809 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.2255ms
2024-04-19 08:42:43.315 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 08:42:43.317 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 08:42:43.318 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:42:43.388 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.9207ms
2024-04-19 08:42:48.160 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 08:42:48.165 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 08:42:48.168 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 08:42:48.170 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:42:48.171 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:42:48.214 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:42:48.218 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The AuthorizationPolicy named: 'No tienes permisos para realizar esta tarea.' was not found.
   at Microsoft.AspNetCore.Authorization.AuthorizationPolicy.CombineAsync(IAuthorizationPolicyProvider policyProvider, IEnumerable`1 authorizeData, IEnumerable`1 policies)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-19 08:42:48.221 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 500 null text/plain; charset=utf-8 61.563ms
2024-04-19 08:45:27.892 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 08:45:27.950 -05:00 [DBG] Hosting starting
2024-04-19 08:45:27.968 -05:00 [INF] User profile is available. Using 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-19 08:45:27.973 -05:00 [DBG] Reading data from file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 08:45:27.981 -05:00 [DBG] Found key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2}.
2024-04-19 08:45:27.987 -05:00 [DBG] Considering key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with expiration date 2024-07-18 13:41:10Z as default key.
2024-04-19 08:45:27.990 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:45:27.992 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-19 08:45:27.993 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:45:27.995 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-19 08:45:27.996 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-19 08:45:27.998 -05:00 [DBG] Using key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} as the default key.
2024-04-19 08:45:27.998 -05:00 [DBG] Key ring with default key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} was loaded during application startup.
2024-04-19 08:45:28.124 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 08:45:28.124 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 08:45:28.125 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 08:45:28.125 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 08:45:28.126 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 08:45:28.127 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 08:45:28.127 -05:00 [INF] Hosting environment: Development
2024-04-19 08:45:28.127 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 08:45:28.128 -05:00 [DBG] Hosting started
2024-04-19 08:45:28.262 -05:00 [DBG] Connection id "0HN30ERSIOUUD" accepted.
2024-04-19 08:45:28.262 -05:00 [DBG] Connection id "0HN30ERSIOUUC" accepted.
2024-04-19 08:45:28.264 -05:00 [DBG] Connection id "0HN30ERSIOUUD" started.
2024-04-19 08:45:28.264 -05:00 [DBG] Connection id "0HN30ERSIOUUC" started.
2024-04-19 08:45:28.276 -05:00 [DBG] Connection id "0HN30ERSIOUUD" received FIN.
2024-04-19 08:45:28.276 -05:00 [DBG] Connection id "0HN30ERSIOUUC" received FIN.
2024-04-19 08:45:28.280 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:45:28.280 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:45:28.295 -05:00 [DBG] Connection id "0HN30ERSIOUUD" stopped.
2024-04-19 08:45:28.295 -05:00 [DBG] Connection id "0HN30ERSIOUUC" stopped.
2024-04-19 08:45:28.297 -05:00 [DBG] Connection id "0HN30ERSIOUUD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:45:28.297 -05:00 [DBG] Connection id "0HN30ERSIOUUC" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:45:28.403 -05:00 [DBG] Connection id "0HN30ERSIOUUE" accepted.
2024-04-19 08:45:28.404 -05:00 [DBG] Connection id "0HN30ERSIOUUE" started.
2024-04-19 08:45:28.433 -05:00 [DBG] Connection 0HN30ERSIOUUE established using the following protocol: "Tls13"
2024-04-19 08:45:28.472 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 08:45:28.535 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 08:45:28.546 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 08:45:28.547 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:45:28.602 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 08:45:28.606 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 08:45:28.629 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 08:45:28.630 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 08:45:28.635 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 166.5569ms
2024-04-19 08:45:28.740 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 08:45:28.740 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 08:45:28.745 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 5.1788ms
2024-04-19 08:45:28.775 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.8167ms
2024-04-19 08:45:29.302 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 08:45:29.304 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 08:45:29.304 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:45:29.400 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.1591ms
2024-04-19 08:45:34.568 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 08:45:34.573 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 08:45:34.576 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 08:45:34.577 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:45:34.579 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:45:34.616 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:45:34.620 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The AuthorizationPolicy named: 'No tienes permisos para realizar esta tarea.' was not found.
   at Microsoft.AspNetCore.Authorization.AuthorizationPolicy.CombineAsync(IAuthorizationPolicyProvider policyProvider, IEnumerable`1 authorizeData, IEnumerable`1 policies)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-19 08:45:34.625 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 500 null text/plain; charset=utf-8 56.9365ms
2024-04-19 08:46:08.084 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 08:46:08.147 -05:00 [DBG] Hosting starting
2024-04-19 08:46:08.167 -05:00 [INF] User profile is available. Using 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-19 08:46:08.173 -05:00 [DBG] Reading data from file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 08:46:08.180 -05:00 [DBG] Found key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2}.
2024-04-19 08:46:08.186 -05:00 [DBG] Considering key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with expiration date 2024-07-18 13:41:10Z as default key.
2024-04-19 08:46:08.189 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:46:08.191 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-19 08:46:08.192 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:46:08.194 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-19 08:46:08.195 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-19 08:46:08.197 -05:00 [DBG] Using key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} as the default key.
2024-04-19 08:46:08.198 -05:00 [DBG] Key ring with default key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} was loaded during application startup.
2024-04-19 08:46:08.316 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 08:46:08.316 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 08:46:08.317 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 08:46:08.317 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 08:46:08.318 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 08:46:08.318 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 08:46:08.319 -05:00 [INF] Hosting environment: Development
2024-04-19 08:46:08.320 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 08:46:08.320 -05:00 [DBG] Hosting started
2024-04-19 08:46:08.438 -05:00 [DBG] Connection id "0HN30ES8HTVU1" accepted.
2024-04-19 08:46:08.438 -05:00 [DBG] Connection id "0HN30ES8HTVU0" accepted.
2024-04-19 08:46:08.439 -05:00 [DBG] Connection id "0HN30ES8HTVU1" started.
2024-04-19 08:46:08.440 -05:00 [DBG] Connection id "0HN30ES8HTVU0" started.
2024-04-19 08:46:08.461 -05:00 [DBG] Connection id "0HN30ES8HTVU1" received FIN.
2024-04-19 08:46:08.461 -05:00 [DBG] Connection id "0HN30ES8HTVU0" received FIN.
2024-04-19 08:46:08.465 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:46:08.465 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:46:08.477 -05:00 [DBG] Connection id "0HN30ES8HTVU1" stopped.
2024-04-19 08:46:08.477 -05:00 [DBG] Connection id "0HN30ES8HTVU0" stopped.
2024-04-19 08:46:08.479 -05:00 [DBG] Connection id "0HN30ES8HTVU1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:46:08.479 -05:00 [DBG] Connection id "0HN30ES8HTVU0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:46:08.580 -05:00 [DBG] Connection id "0HN30ES8HTVU2" accepted.
2024-04-19 08:46:08.580 -05:00 [DBG] Connection id "0HN30ES8HTVU2" started.
2024-04-19 08:46:08.602 -05:00 [DBG] Connection 0HN30ES8HTVU2 established using the following protocol: "Tls13"
2024-04-19 08:46:08.636 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 08:46:08.699 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 08:46:08.712 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 08:46:08.713 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:46:08.768 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 08:46:08.770 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 08:46:08.781 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 08:46:08.782 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 08:46:08.784 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 151.5911ms
2024-04-19 08:46:08.792 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 08:46:08.796 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 4.0671ms
2024-04-19 08:46:08.857 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 08:46:08.883 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.3529ms
2024-04-19 08:46:09.339 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 08:46:09.341 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 08:46:09.341 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:46:09.417 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 78.2717ms
2024-04-19 08:46:16.938 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 08:46:16.943 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 08:46:16.945 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 08:46:16.946 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:46:16.948 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:46:16.982 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:46:16.985 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The AuthorizationPolicy named: 'No tienes permisos para realizar esta tarea.' was not found.
   at Microsoft.AspNetCore.Authorization.AuthorizationPolicy.CombineAsync(IAuthorizationPolicyProvider policyProvider, IEnumerable`1 authorizeData, IEnumerable`1 policies)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-19 08:46:16.988 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 500 null text/plain; charset=utf-8 50.4777ms
2024-04-19 08:46:46.826 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 08:46:46.897 -05:00 [DBG] Hosting starting
2024-04-19 08:46:46.918 -05:00 [INF] User profile is available. Using 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-19 08:46:46.923 -05:00 [DBG] Reading data from file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 08:46:46.929 -05:00 [DBG] Found key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2}.
2024-04-19 08:46:46.934 -05:00 [DBG] Considering key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with expiration date 2024-07-18 13:41:10Z as default key.
2024-04-19 08:46:46.936 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:46:46.938 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-19 08:46:46.939 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:46:46.941 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-19 08:46:46.942 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-19 08:46:46.943 -05:00 [DBG] Using key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} as the default key.
2024-04-19 08:46:46.944 -05:00 [DBG] Key ring with default key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} was loaded during application startup.
2024-04-19 08:46:47.045 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 08:46:47.046 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 08:46:47.046 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 08:46:47.047 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 08:46:47.047 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 08:46:47.048 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 08:46:47.048 -05:00 [INF] Hosting environment: Development
2024-04-19 08:46:47.049 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 08:46:47.049 -05:00 [DBG] Hosting started
2024-04-19 08:46:47.243 -05:00 [DBG] Connection id "0HN30ESK40AM6" accepted.
2024-04-19 08:46:47.243 -05:00 [DBG] Connection id "0HN30ESK40AM5" accepted.
2024-04-19 08:46:47.244 -05:00 [DBG] Connection id "0HN30ESK40AM6" started.
2024-04-19 08:46:47.244 -05:00 [DBG] Connection id "0HN30ESK40AM5" started.
2024-04-19 08:46:47.255 -05:00 [DBG] Connection id "0HN30ESK40AM6" received FIN.
2024-04-19 08:46:47.255 -05:00 [DBG] Connection id "0HN30ESK40AM5" received FIN.
2024-04-19 08:46:47.263 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:46:47.263 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:46:47.275 -05:00 [DBG] Connection id "0HN30ESK40AM6" stopped.
2024-04-19 08:46:47.275 -05:00 [DBG] Connection id "0HN30ESK40AM5" stopped.
2024-04-19 08:46:47.277 -05:00 [DBG] Connection id "0HN30ESK40AM6" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:46:47.277 -05:00 [DBG] Connection id "0HN30ESK40AM5" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:46:47.360 -05:00 [DBG] Connection id "0HN30ESK40AM7" accepted.
2024-04-19 08:46:47.360 -05:00 [DBG] Connection id "0HN30ESK40AM7" started.
2024-04-19 08:46:47.383 -05:00 [DBG] Connection 0HN30ESK40AM7 established using the following protocol: "Tls13"
2024-04-19 08:46:47.415 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 08:46:47.475 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 08:46:47.485 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 08:46:47.486 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:46:47.533 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 08:46:47.535 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 08:46:47.546 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 08:46:47.546 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 08:46:47.548 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 136.4664ms
2024-04-19 08:46:47.555 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 08:46:47.559 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 4.6655ms
2024-04-19 08:46:47.626 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 08:46:47.656 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.2071ms
2024-04-19 08:46:48.166 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 08:46:48.168 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 08:46:48.168 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:46:48.243 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 77.3338ms
2024-04-19 08:46:50.481 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 08:46:50.486 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 08:46:50.488 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 08:46:50.489 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:46:50.491 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:46:50.525 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:46:50.528 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The AuthorizationPolicy named: 'No tienes permisos para realizar esta tarea.' was not found.
   at Microsoft.AspNetCore.Authorization.AuthorizationPolicy.CombineAsync(IAuthorizationPolicyProvider policyProvider, IEnumerable`1 authorizeData, IEnumerable`1 policies)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-19 08:46:50.531 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 500 null text/plain; charset=utf-8 50.1503ms
2024-04-19 08:46:51.305 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 08:46:51.307 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 08:46:51.308 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 08:46:51.309 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:46:51.309 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:46:51.311 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:46:51.312 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The AuthorizationPolicy named: 'No tienes permisos para realizar esta tarea.' was not found.
   at Microsoft.AspNetCore.Authorization.AuthorizationPolicy.CombineAsync(IAuthorizationPolicyProvider policyProvider, IEnumerable`1 authorizeData, IEnumerable`1 policies)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-19 08:46:51.313 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 500 null text/plain; charset=utf-8 8.3501ms
2024-04-19 08:47:15.820 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 08:47:15.903 -05:00 [DBG] Hosting starting
2024-04-19 08:47:15.931 -05:00 [INF] User profile is available. Using 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-19 08:47:15.936 -05:00 [DBG] Reading data from file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 08:47:15.945 -05:00 [DBG] Found key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2}.
2024-04-19 08:47:15.951 -05:00 [DBG] Considering key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with expiration date 2024-07-18 13:41:10Z as default key.
2024-04-19 08:47:15.955 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:47:15.957 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-19 08:47:15.958 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:47:15.960 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-19 08:47:15.962 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-19 08:47:15.963 -05:00 [DBG] Using key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} as the default key.
2024-04-19 08:47:15.963 -05:00 [DBG] Key ring with default key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} was loaded during application startup.
2024-04-19 08:47:16.092 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 08:47:16.093 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 08:47:16.094 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 08:47:16.094 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 08:47:16.095 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 08:47:16.096 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 08:47:16.096 -05:00 [INF] Hosting environment: Development
2024-04-19 08:47:16.097 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 08:47:16.097 -05:00 [DBG] Hosting started
2024-04-19 08:47:16.179 -05:00 [DBG] Connection id "0HN30ESSNUNIS" accepted.
2024-04-19 08:47:16.179 -05:00 [DBG] Connection id "0HN30ESSNUNIR" accepted.
2024-04-19 08:47:16.180 -05:00 [DBG] Connection id "0HN30ESSNUNIS" started.
2024-04-19 08:47:16.180 -05:00 [DBG] Connection id "0HN30ESSNUNIR" started.
2024-04-19 08:47:16.194 -05:00 [DBG] Connection id "0HN30ESSNUNIS" received FIN.
2024-04-19 08:47:16.194 -05:00 [DBG] Connection id "0HN30ESSNUNIR" received FIN.
2024-04-19 08:47:16.198 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:47:16.198 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:47:16.210 -05:00 [DBG] Connection id "0HN30ESSNUNIR" stopped.
2024-04-19 08:47:16.210 -05:00 [DBG] Connection id "0HN30ESSNUNIS" stopped.
2024-04-19 08:47:16.211 -05:00 [DBG] Connection id "0HN30ESSNUNIR" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:47:16.211 -05:00 [DBG] Connection id "0HN30ESSNUNIS" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:47:16.337 -05:00 [DBG] Connection id "0HN30ESSNUNIT" accepted.
2024-04-19 08:47:16.339 -05:00 [DBG] Connection id "0HN30ESSNUNIT" started.
2024-04-19 08:47:16.361 -05:00 [DBG] Connection 0HN30ESSNUNIT established using the following protocol: "Tls13"
2024-04-19 08:47:16.394 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 08:47:16.453 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 08:47:16.463 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 08:47:16.464 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:47:16.510 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 08:47:16.511 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 08:47:16.521 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 08:47:16.522 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 08:47:16.524 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 133.2555ms
2024-04-19 08:47:16.534 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 08:47:16.538 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 4.1054ms
2024-04-19 08:47:16.590 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 08:47:16.616 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.0892ms
2024-04-19 08:47:17.112 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 08:47:17.114 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 08:47:17.115 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:47:17.184 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.2686ms
2024-04-19 08:47:20.970 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 08:47:20.975 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 08:47:20.977 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 08:47:20.978 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:47:20.980 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:47:21.016 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:47:21.018 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 08:47:21.021 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 08:47:21.024 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 08:47:21.024 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 401 0 null 54.1891ms
2024-04-19 08:48:19.457 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 08:48:19.511 -05:00 [DBG] Hosting starting
2024-04-19 08:48:19.530 -05:00 [INF] User profile is available. Using 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-19 08:48:19.537 -05:00 [DBG] Reading data from file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 08:48:19.544 -05:00 [DBG] Found key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2}.
2024-04-19 08:48:19.550 -05:00 [DBG] Considering key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with expiration date 2024-07-18 13:41:10Z as default key.
2024-04-19 08:48:19.552 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:48:19.554 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-19 08:48:19.556 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:48:19.558 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-19 08:48:19.559 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-19 08:48:19.560 -05:00 [DBG] Using key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} as the default key.
2024-04-19 08:48:19.561 -05:00 [DBG] Key ring with default key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} was loaded during application startup.
2024-04-19 08:48:19.681 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 08:48:19.682 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 08:48:19.682 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 08:48:19.683 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 08:48:19.683 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 08:48:19.684 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 08:48:19.685 -05:00 [INF] Hosting environment: Development
2024-04-19 08:48:19.685 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 08:48:19.686 -05:00 [DBG] Hosting started
2024-04-19 08:48:19.894 -05:00 [DBG] Connection id "0HN30ETFNJ2R8" accepted.
2024-04-19 08:48:19.894 -05:00 [DBG] Connection id "0HN30ETFNJ2R7" accepted.
2024-04-19 08:48:19.895 -05:00 [DBG] Connection id "0HN30ETFNJ2R8" started.
2024-04-19 08:48:19.895 -05:00 [DBG] Connection id "0HN30ETFNJ2R7" started.
2024-04-19 08:48:19.908 -05:00 [DBG] Connection id "0HN30ETFNJ2R7" received FIN.
2024-04-19 08:48:19.908 -05:00 [DBG] Connection id "0HN30ETFNJ2R8" received FIN.
2024-04-19 08:48:19.912 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:48:19.912 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:48:19.926 -05:00 [DBG] Connection id "0HN30ETFNJ2R7" stopped.
2024-04-19 08:48:19.926 -05:00 [DBG] Connection id "0HN30ETFNJ2R8" stopped.
2024-04-19 08:48:19.928 -05:00 [DBG] Connection id "0HN30ETFNJ2R8" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:48:19.929 -05:00 [DBG] Connection id "0HN30ETFNJ2R7" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:48:20.391 -05:00 [DBG] Connection id "0HN30ETFNJ2R9" accepted.
2024-04-19 08:48:20.393 -05:00 [DBG] Connection id "0HN30ETFNJ2R9" started.
2024-04-19 08:48:20.422 -05:00 [DBG] Connection 0HN30ETFNJ2R9 established using the following protocol: "Tls13"
2024-04-19 08:48:20.465 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 08:48:20.567 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 08:48:20.592 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 08:48:20.592 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:48:20.657 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 08:48:20.659 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 08:48:20.671 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 08:48:20.672 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 08:48:20.675 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 210.7249ms
2024-04-19 08:48:20.684 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 08:48:20.690 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 6.2671ms
2024-04-19 08:48:20.758 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 08:48:20.787 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.3261ms
2024-04-19 08:48:21.224 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 08:48:21.225 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 08:48:21.226 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:48:21.294 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.4178ms
2024-04-19 08:48:32.455 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/autenticar - application/json 54
2024-04-19 08:48:32.459 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 08:48:32.462 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 08:48:32.463 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:48:32.465 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:48:32.499 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:48:32.501 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:48:32.515 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 08:48:32.516 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 08:48:32.517 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 08:48:32.518 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 08:48:32.519 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 08:48:32.520 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 08:48:32.521 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 08:48:32.591 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-19 08:48:32.602 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 08:48:32.609 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 08:48:32.611 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 08:48:32.612 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 08:48:32.616 -05:00 [DBG] Connection id "0HN30ETFNJ2R9", Request id "0HN30ETFNJ2R9:00000009": started reading request body.
2024-04-19 08:48:32.617 -05:00 [DBG] Connection id "0HN30ETFNJ2R9", Request id "0HN30ETFNJ2R9:00000009": done reading request body.
2024-04-19 08:48:32.620 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 08:48:32.621 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:48:32.622 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:48:32.623 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 08:48:32.628 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:48:32.993 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 08:48:33.026 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .FirstOrDefault(u => u.Email == __loginUsuarioDTO_Email_0 && u.Clave == __loginUsuarioDTO_Clave_1)'
2024-04-19 08:48:33.150 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Usuario>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Apellido (string) Required, 1], [Property: Usuario.Clave (string) Required, 2], [Property: Usuario.Documento (long) Required, 3], [Property: Usuario.Email (string) Required, 4], [Property: Usuario.Nombre (string) Required, 5], [Property: Usuario.TipoDocumentoId (int) Required FK Index, 6] }
        SELECT TOP(1) u.Id, u.Apellido, u.Clave, u.Documento, u.Email, u.Nombre, u.TipoDocumentoId
        FROM Usuario AS u
        WHERE (u.Email == @__loginUsuarioDTO_Email_0) && (u.Clave == @__loginUsuarioDTO_Clave_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Usuario>, 
    PruebaUser.Infraestructure.UserDBContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-04-19 08:48:33.171 -05:00 [DBG] Creating DbConnection.
2024-04-19 08:48:33.183 -05:00 [DBG] Created DbConnection. (10ms).
2024-04-19 08:48:33.185 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:48:33.319 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:48:33.323 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 08:48:33.327 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2024-04-19 08:48:33.332 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-04-19 08:48:33.338 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000), @__loginUsuarioDTO_Clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0 AND [u].[Clave] = @__loginUsuarioDTO_Clave_1
2024-04-19 08:48:33.374 -05:00 [INF] Executed DbCommand (34ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000), @__loginUsuarioDTO_Clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0 AND [u].[Clave] = @__loginUsuarioDTO_Clave_1
2024-04-19 08:48:33.379 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:48:33.384 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2024-04-19 08:48:33.385 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:48:33.390 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (4ms).
2024-04-19 08:48:33.393 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 08:48:33.395 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 08:48:33.396 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 08:48:33.397 -05:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2024-04-19 08:48:33.400 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 877.7761ms
2024-04-19 08:48:33.401 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:48:33.403 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 08:48:33.406 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:48:33.409 -05:00 [DBG] Disposed connection to database '' on server '' (2ms).
2024-04-19 08:48:33.410 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/autenticar - 401 null text/plain; charset=utf-8 955.1529ms
2024-04-19 08:49:05.955 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/autenticar - application/json 60
2024-04-19 08:49:05.959 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 08:49:05.960 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 08:49:05.961 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:49:05.962 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:49:05.963 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:49:05.963 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:49:05.964 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 08:49:05.965 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 08:49:05.965 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 08:49:05.966 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 08:49:05.967 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 08:49:05.967 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 08:49:05.968 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 08:49:05.969 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 08:49:05.970 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 08:49:05.971 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 08:49:05.972 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 08:49:05.973 -05:00 [DBG] Connection id "0HN30ETFNJ2R9", Request id "0HN30ETFNJ2R9:0000000B": started reading request body.
2024-04-19 08:49:05.973 -05:00 [DBG] Connection id "0HN30ETFNJ2R9", Request id "0HN30ETFNJ2R9:0000000B": done reading request body.
2024-04-19 08:49:05.974 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 08:49:05.975 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:49:05.975 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:49:05.976 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 08:49:05.977 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:49:06.008 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 08:49:06.012 -05:00 [DBG] Creating DbConnection.
2024-04-19 08:49:06.012 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 08:49:06.013 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:49:06.014 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:49:06.015 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 08:49:06.015 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 08:49:06.016 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 08:49:06.017 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000), @__loginUsuarioDTO_Clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0 AND [u].[Clave] = @__loginUsuarioDTO_Clave_1
2024-04-19 08:49:06.018 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000), @__loginUsuarioDTO_Clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0 AND [u].[Clave] = @__loginUsuarioDTO_Clave_1
2024-04-19 08:49:06.038 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:49:06.052 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:49:06.053 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 33ms reading results.
2024-04-19 08:49:06.054 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:49:06.055 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 08:49:06.131 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 163.1533ms
2024-04-19 08:49:06.132 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:49:06.134 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.ArgumentOutOfRangeException: IDX10720: Unable to create KeyedHashAlgorithm for algorithm 'http://www.w3.org/2001/04/xmldsig-more#hmac-sha256', the key size must be greater than: '256' bits, key has '160' bits. (Parameter 'keyBytes')
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.ValidateKeySize(Byte[] keyBytes, String algorithm, Int32 expectedNumberOfBytes)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.CreateKeyedHashAlgorithm()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.CreateInstance()
   at Microsoft.IdentityModel.Tokens.DisposableObjectPool`1.Allocate()
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.GetKeyedHashAlgorithm(Byte[] keyBytes, String algorithm)
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider.Sign(Byte[] input)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.CreateJwtSecurityTokenPrivate(String issuer, String audience, ClaimsIdentity subject, Nullable`1 notBefore, Nullable`1 expires, Nullable`1 issuedAt, SigningCredentials signingCredentials, EncryptingCredentials encryptingCredentials, IDictionary`2 claimCollection, String tokenType, IDictionary`2 additionalHeaderClaims, IDictionary`2 additionalInnerHeaderClaims)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.CreateToken(SecurityTokenDescriptor tokenDescriptor)
   at PruebaUser.Infraestructure.Services.LoginUsuario.GenerarToken(Int32 idUsuario) in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Infraestructure\Services\LoginUsuario.cs:line 39
   at PruebaUser.Infraestructure.Services.LoginUsuario.DevolverToken(LoginUsuarioDTO loginUsuarioDTO) in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Infraestructure\Services\LoginUsuario.cs:line 53
   at PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar(LoginUsuarioDTO loginUsuarioDTO) in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api\Controllers\LoginUsuarioController.cs:line 23
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-19 08:49:06.155 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 08:49:06.155 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:49:06.156 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 08:49:06.157 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/autenticar - 500 null text/plain; charset=utf-8 202.0207ms
2024-04-19 08:57:31.636 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 08:57:31.695 -05:00 [DBG] Hosting starting
2024-04-19 08:57:31.715 -05:00 [INF] User profile is available. Using 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-19 08:57:31.720 -05:00 [DBG] Reading data from file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 08:57:31.726 -05:00 [DBG] Found key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2}.
2024-04-19 08:57:31.732 -05:00 [DBG] Considering key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with expiration date 2024-07-18 13:41:10Z as default key.
2024-04-19 08:57:31.734 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:57:31.736 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-19 08:57:31.737 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 08:57:31.739 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-19 08:57:31.740 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-19 08:57:31.741 -05:00 [DBG] Using key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} as the default key.
2024-04-19 08:57:31.742 -05:00 [DBG] Key ring with default key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} was loaded during application startup.
2024-04-19 08:57:31.849 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 08:57:31.850 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 08:57:31.850 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 08:57:31.851 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 08:57:31.851 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 08:57:31.852 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 08:57:31.852 -05:00 [INF] Hosting environment: Development
2024-04-19 08:57:31.853 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 08:57:31.854 -05:00 [DBG] Hosting started
2024-04-19 08:57:31.857 -05:00 [DBG] Connection id "0HN30F2K7GTB1" accepted.
2024-04-19 08:57:31.857 -05:00 [DBG] Connection id "0HN30F2K7GTB0" accepted.
2024-04-19 08:57:31.858 -05:00 [DBG] Connection id "0HN30F2K7GTB1" started.
2024-04-19 08:57:31.859 -05:00 [DBG] Connection id "0HN30F2K7GTB0" started.
2024-04-19 08:57:31.866 -05:00 [DBG] Connection id "0HN30F2K7GTB0" received FIN.
2024-04-19 08:57:31.866 -05:00 [DBG] Connection id "0HN30F2K7GTB1" received FIN.
2024-04-19 08:57:31.871 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:57:31.871 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:57:31.885 -05:00 [DBG] Connection id "0HN30F2K7GTB1" stopped.
2024-04-19 08:57:31.885 -05:00 [DBG] Connection id "0HN30F2K7GTB0" stopped.
2024-04-19 08:57:31.887 -05:00 [DBG] Connection id "0HN30F2K7GTB0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:57:31.887 -05:00 [DBG] Connection id "0HN30F2K7GTB1" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:57:32.232 -05:00 [DBG] Connection id "0HN30F2K7GTB2" accepted.
2024-04-19 08:57:32.233 -05:00 [DBG] Connection id "0HN30F2K7GTB2" started.
2024-04-19 08:57:32.264 -05:00 [DBG] Connection 0HN30F2K7GTB2 established using the following protocol: "Tls13"
2024-04-19 08:57:32.306 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 08:57:32.377 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 08:57:32.390 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 08:57:32.391 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:57:32.440 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 08:57:32.442 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 08:57:32.456 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 08:57:32.457 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 08:57:32.461 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 158.8504ms
2024-04-19 08:57:32.472 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 08:57:32.477 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 5.0249ms
2024-04-19 08:57:32.533 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 08:57:32.562 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.2823ms
2024-04-19 08:57:33.010 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 08:57:33.012 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 08:57:33.012 -05:00 [DBG] Request did not match any endpoints
2024-04-19 08:57:33.081 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 70.6091ms
2024-04-19 08:57:37.673 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/autenticar - application/json 54
2024-04-19 08:57:37.679 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 08:57:37.681 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 08:57:37.682 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:57:37.684 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:57:37.717 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:57:37.719 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:57:37.734 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 08:57:37.735 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 08:57:37.736 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 08:57:37.737 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 08:57:37.738 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 08:57:37.738 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 08:57:37.739 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 08:57:37.810 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-19 08:57:37.821 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 08:57:37.828 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 08:57:37.830 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 08:57:37.831 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 08:57:37.836 -05:00 [DBG] Connection id "0HN30F2K7GTB2", Request id "0HN30F2K7GTB2:00000009": started reading request body.
2024-04-19 08:57:37.836 -05:00 [DBG] Connection id "0HN30F2K7GTB2", Request id "0HN30F2K7GTB2:00000009": done reading request body.
2024-04-19 08:57:37.839 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 08:57:37.840 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:57:37.840 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:57:37.841 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 08:57:37.848 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:57:38.220 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 08:57:38.253 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .FirstOrDefault(u => u.Email == __loginUsuarioDTO_Email_0 && u.Clave == __loginUsuarioDTO_Clave_1)'
2024-04-19 08:57:38.373 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Usuario>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Apellido (string) Required, 1], [Property: Usuario.Clave (string) Required, 2], [Property: Usuario.Documento (long) Required, 3], [Property: Usuario.Email (string) Required, 4], [Property: Usuario.Nombre (string) Required, 5], [Property: Usuario.TipoDocumentoId (int) Required FK Index, 6] }
        SELECT TOP(1) u.Id, u.Apellido, u.Clave, u.Documento, u.Email, u.Nombre, u.TipoDocumentoId
        FROM Usuario AS u
        WHERE (u.Email == @__loginUsuarioDTO_Email_0) && (u.Clave == @__loginUsuarioDTO_Clave_1)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Usuario>, 
    PruebaUser.Infraestructure.UserDBContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2024-04-19 08:57:38.393 -05:00 [DBG] Creating DbConnection.
2024-04-19 08:57:38.404 -05:00 [DBG] Created DbConnection. (10ms).
2024-04-19 08:57:38.406 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:57:38.542 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:57:38.545 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 08:57:38.549 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-04-19 08:57:38.554 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2024-04-19 08:57:38.559 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000), @__loginUsuarioDTO_Clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0 AND [u].[Clave] = @__loginUsuarioDTO_Clave_1
2024-04-19 08:57:38.586 -05:00 [INF] Executed DbCommand (28ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000), @__loginUsuarioDTO_Clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0 AND [u].[Clave] = @__loginUsuarioDTO_Clave_1
2024-04-19 08:57:38.590 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:57:38.595 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 5ms reading results.
2024-04-19 08:57:38.597 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:57:38.601 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (3ms).
2024-04-19 08:57:38.603 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 08:57:38.605 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 08:57:38.606 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 08:57:38.607 -05:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2024-04-19 08:57:38.610 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 868.9989ms
2024-04-19 08:57:38.611 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:57:38.613 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 08:57:38.617 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:57:38.618 -05:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-19 08:57:38.619 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/autenticar - 401 null text/plain; charset=utf-8 946.0353ms
2024-04-19 08:57:54.023 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/autenticar - application/json 60
2024-04-19 08:57:54.025 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 08:57:54.026 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 08:57:54.027 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:57:54.028 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:57:54.029 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:57:54.030 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:57:54.031 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 08:57:54.032 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 08:57:54.032 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 08:57:54.033 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 08:57:54.034 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 08:57:54.034 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 08:57:54.035 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 08:57:54.036 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 08:57:54.037 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 08:57:54.038 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 08:57:54.038 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 08:57:54.039 -05:00 [DBG] Connection id "0HN30F2K7GTB2", Request id "0HN30F2K7GTB2:0000000B": started reading request body.
2024-04-19 08:57:54.039 -05:00 [DBG] Connection id "0HN30F2K7GTB2", Request id "0HN30F2K7GTB2:0000000B": done reading request body.
2024-04-19 08:57:54.040 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 08:57:54.040 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:57:54.041 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:57:54.041 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 08:57:54.042 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:57:54.073 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 08:57:54.076 -05:00 [DBG] Creating DbConnection.
2024-04-19 08:57:54.077 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 08:57:54.078 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:57:54.079 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:57:54.080 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 08:57:54.081 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 08:57:54.081 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 08:57:54.082 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000), @__loginUsuarioDTO_Clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0 AND [u].[Clave] = @__loginUsuarioDTO_Clave_1
2024-04-19 08:57:54.084 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000), @__loginUsuarioDTO_Clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0 AND [u].[Clave] = @__loginUsuarioDTO_Clave_1
2024-04-19 08:57:54.104 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:57:54.118 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:57:54.119 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 33ms reading results.
2024-04-19 08:57:54.119 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:57:54.120 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 08:57:54.142 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 08:57:54.143 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 08:57:54.145 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-19 08:57:54.146 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 08:57:54.146 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 08:57:54.147 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 08:57:54.147 -05:00 [INF] Executing OkObjectResult, writing value of type 'PruebaUser.Core.DTOs.LoginResponse'.
2024-04-19 08:57:54.152 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 117.1423ms
2024-04-19 08:57:54.153 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:57:54.154 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 08:57:54.154 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:57:54.155 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 08:57:54.156 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/autenticar - 200 null application/json; charset=utf-8 132.7896ms
2024-04-19 08:58:13.049 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 08:58:13.051 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 08:58:13.052 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 08:58:13.052 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:58:13.053 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:58:13.055 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:58:13.057 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 08:58:13.059 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 08:58:13.062 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 08:58:13.063 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 401 0 null 13.7716ms
2024-04-19 08:58:48.336 -05:00 [DBG] Connection id "0HN30F2K7GTB3" accepted.
2024-04-19 08:58:48.336 -05:00 [DBG] Connection id "0HN30F2K7GTB3" received FIN.
2024-04-19 08:58:48.337 -05:00 [DBG] Connection id "0HN30F2K7GTB3" started.
2024-04-19 08:58:48.337 -05:00 [DBG] Connection id "0HN30F2K7GTB4" accepted.
2024-04-19 08:58:48.340 -05:00 [DBG] Connection id "0HN30F2K7GTB4" started.
2024-04-19 08:58:48.341 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 08:58:48.343 -05:00 [DBG] Connection id "0HN30F2K7GTB3" stopped.
2024-04-19 08:58:48.343 -05:00 [DBG] Connection id "0HN30F2K7GTB3" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 08:58:48.345 -05:00 [DBG] Connection 0HN30F2K7GTB4 established using the following protocol: "Tls13"
2024-04-19 08:58:48.349 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:7041/api/usuario - null null
2024-04-19 08:58:48.350 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 08:58:48.351 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 08:58:48.351 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:58:48.352 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:58:48.376 -05:00 [DBG] Successfully validated the token.
2024-04-19 08:58:48.378 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-04-19 08:58:48.380 -05:00 [DBG] Authorization was successful.
2024-04-19 08:58:48.380 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:58:48.383 -05:00 [INF] Route matched with {action = "ListarUsuarios", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[PruebaUser.Core.DTOs.UsuarioDTO]]] ListarUsuarios() on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 08:58:48.384 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 08:58:48.385 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 08:58:48.385 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 08:58:48.386 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 08:58:48.387 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 08:58:48.387 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 08:58:48.433 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 08:58:48.440 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 08:58:48.446 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Include(usuario => usuario.TipoDocumento)'
2024-04-19 08:58:48.454 -05:00 [DBG] Including navigation: 'Usuario.TipoDocumento'.
2024-04-19 08:58:48.487 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Usuario>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Apellido (string) Required, 1], [Property: Usuario.Clave (string) Required, 2], [Property: Usuario.Documento (long) Required, 3], [Property: Usuario.Email (string) Required, 4], [Property: Usuario.Nombre (string) Required, 5], [Property: Usuario.TipoDocumentoId (int) Required FK Index, 6] }
            1 -> Dictionary<IProperty, int> { [Property: TipoDocumento.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: TipoDocumento.Descripcion (string) Required, 8] }
        SELECT u.Id, u.Apellido, u.Clave, u.Documento, u.Email, u.Nombre, u.TipoDocumentoId, t.Id, t.Descripcion
        FROM Usuario AS u
        INNER JOIN TipoDocumento AS t ON u.TipoDocumentoId == t.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Usuario>, 
    PruebaUser.Infraestructure.UserDBContext, 
    False, 
    False, 
    True
)'
2024-04-19 08:58:48.494 -05:00 [DBG] Creating DbConnection.
2024-04-19 08:58:48.495 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 08:58:48.496 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:58:48.498 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:58:48.499 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 08:58:48.500 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 08:58:48.500 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 08:58:48.501 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
2024-04-19 08:58:48.520 -05:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
2024-04-19 08:58:48.523 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.533 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.536 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.539 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.539 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.540 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.541 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.541 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.542 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.543 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.546 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.547 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.547 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.548 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.549 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.549 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.550 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.550 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:58:48.552 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:58:48.553 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 31ms reading results.
2024-04-19 08:58:48.555 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:58:48.555 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 08:58:48.567 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 08:58:48.569 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 08:58:48.569 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 08:58:48.569 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 08:58:48.570 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 08:58:48.570 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PruebaUser.Core.DTOs.UsuarioDTO, PruebaUser.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-19 08:58:48.578 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api) in 191.0559ms
2024-04-19 08:58:48.579 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:58:48.581 -05:00 [DBG] Connection id "0HN30F2K7GTB4" completed keep alive response.
2024-04-19 08:58:48.581 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 08:58:48.582 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:58:48.582 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 08:58:48.583 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:7041/api/usuario - 200 null application/json; charset=utf-8 234.1603ms
2024-04-19 08:58:56.451 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:7041/api/usuario/1 - null null
2024-04-19 08:58:56.452 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/1'
2024-04-19 08:58:56.453 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/1'
2024-04-19 08:58:56.454 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)'
2024-04-19 08:58:56.454 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:58:56.457 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 1:58:54 p.m.', Current time (UTC): '19/04/2024 1:58:56 p.m.'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-04-19 08:58:56.458 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 1:58:54 p.m.', Current time (UTC): '19/04/2024 1:58:56 p.m.'.
2024-04-19 08:58:56.460 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 08:58:56.461 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 08:58:56.462 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 08:58:56.463 -05:00 [DBG] Connection id "0HN30F2K7GTB4" completed keep alive response.
2024-04-19 08:58:56.463 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:7041/api/usuario/1 - 401 0 null 12.3607ms
2024-04-19 08:59:00.342 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:7041/api/usuario/2 - null null
2024-04-19 08:59:00.343 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/2'
2024-04-19 08:59:00.344 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/2'
2024-04-19 08:59:00.345 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)'
2024-04-19 08:59:00.345 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:59:00.346 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 1:58:54 p.m.', Current time (UTC): '19/04/2024 1:59:00 p.m.'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-04-19 08:59:00.347 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 1:58:54 p.m.', Current time (UTC): '19/04/2024 1:59:00 p.m.'.
2024-04-19 08:59:00.348 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 08:59:00.348 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 08:59:00.349 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 08:59:00.349 -05:00 [DBG] Connection id "0HN30F2K7GTB4" completed keep alive response.
2024-04-19 08:59:00.350 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:7041/api/usuario/2 - 401 0 null 8.3605ms
2024-04-19 08:59:16.433 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/autenticar - application/json 60
2024-04-19 08:59:16.435 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 08:59:16.436 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 08:59:16.437 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:59:16.437 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:59:16.438 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 08:59:16.438 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:59:16.439 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 08:59:16.440 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 08:59:16.441 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 08:59:16.442 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 08:59:16.442 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 08:59:16.443 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 08:59:16.444 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 08:59:16.446 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 08:59:16.447 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 08:59:16.447 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 08:59:16.448 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 08:59:16.449 -05:00 [DBG] Connection id "0HN30F2K7GTB2", Request id "0HN30F2K7GTB2:0000000F": started reading request body.
2024-04-19 08:59:16.449 -05:00 [DBG] Connection id "0HN30F2K7GTB2", Request id "0HN30F2K7GTB2:0000000F": done reading request body.
2024-04-19 08:59:16.450 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 08:59:16.450 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:59:16.451 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:59:16.452 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 08:59:16.452 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 08:59:16.453 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 08:59:16.454 -05:00 [DBG] Creating DbConnection.
2024-04-19 08:59:16.455 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 08:59:16.455 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:16.456 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:16.456 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 08:59:16.457 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 08:59:16.457 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 08:59:16.458 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000), @__loginUsuarioDTO_Clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0 AND [u].[Clave] = @__loginUsuarioDTO_Clave_1
2024-04-19 08:59:16.464 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000), @__loginUsuarioDTO_Clave_1='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0 AND [u].[Clave] = @__loginUsuarioDTO_Clave_1
2024-04-19 08:59:16.466 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:16.466 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:16.467 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 08:59:16.469 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:16.470 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 08:59:16.471 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 08:59:16.472 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 08:59:16.472 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-19 08:59:16.473 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 08:59:16.473 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 08:59:16.473 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 08:59:16.474 -05:00 [INF] Executing OkObjectResult, writing value of type 'PruebaUser.Core.DTOs.LoginResponse'.
2024-04-19 08:59:16.475 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 30.6647ms
2024-04-19 08:59:16.475 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 08:59:16.476 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 08:59:16.477 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:16.477 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 08:59:16.478 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/autenticar - 200 null application/json; charset=utf-8 44.9293ms
2024-04-19 08:59:38.170 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:7041/api/usuario/2 - null null
2024-04-19 08:59:38.171 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/2'
2024-04-19 08:59:38.172 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/2'
2024-04-19 08:59:38.173 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)'
2024-04-19 08:59:38.173 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:59:38.174 -05:00 [DBG] Successfully validated the token.
2024-04-19 08:59:38.174 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-04-19 08:59:38.175 -05:00 [DBG] Authorization was successful.
2024-04-19 08:59:38.176 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)'
2024-04-19 08:59:38.179 -05:00 [INF] Route matched with {action = "ConsultarUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] ConsultarUsuario(Int32) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 08:59:38.180 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 08:59:38.180 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 08:59:38.181 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 08:59:38.182 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 08:59:38.182 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 08:59:38.183 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 08:59:38.184 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 08:59:38.185 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-19 08:59:38.186 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-19 08:59:38.187 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 08:59:38.188 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 08:59:38.188 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-19 08:59:38.189 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-19 08:59:38.191 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 08:59:38.194 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Include(u => u.TipoDocumento)
    .FirstOrDefault(u => u.Id == __Id_0)'
2024-04-19 08:59:38.195 -05:00 [DBG] Including navigation: 'Usuario.TipoDocumento'.
2024-04-19 08:59:38.200 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: new SingleQueryingEnumerable<Usuario>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Apellido (string) Required, 1], [Property: Usuario.Clave (string) Required, 2], [Property: Usuario.Documento (long) Required, 3], [Property: Usuario.Email (string) Required, 4], [Property: Usuario.Nombre (string) Required, 5], [Property: Usuario.TipoDocumentoId (int) Required FK Index, 6] }
                1 -> Dictionary<IProperty, int> { [Property: TipoDocumento.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: TipoDocumento.Descripcion (string) Required, 8] }
            SELECT TOP(1) u.Id, u.Apellido, u.Clave, u.Documento, u.Email, u.Nombre, u.TipoDocumentoId, t.Id, t.Descripcion
            FROM Usuario AS u
            INNER JOIN TipoDocumento AS t ON u.TipoDocumentoId == t.Id
            WHERE u.Id == @__Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Usuario>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 08:59:38.202 -05:00 [DBG] Creating DbConnection.
2024-04-19 08:59:38.202 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 08:59:38.203 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:38.203 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:38.204 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 08:59:38.204 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 08:59:38.205 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 08:59:38.206 -05:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
WHERE [u].[Id] = @__Id_0
2024-04-19 08:59:38.211 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
WHERE [u].[Id] = @__Id_0
2024-04-19 08:59:38.212 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:38.213 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:38.213 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:38.215 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:38.215 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 3ms reading results.
2024-04-19 08:59:38.216 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:38.217 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 08:59:38.219 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 08:59:38.220 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 08:59:38.220 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 08:59:38.221 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 08:59:38.221 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 08:59:38.222 -05:00 [INF] Executing OkObjectResult, writing value of type 'PruebaUser.Core.DTOs.UsuarioDTO'.
2024-04-19 08:59:38.222 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api) in 39.3117ms
2024-04-19 08:59:38.223 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)'
2024-04-19 08:59:38.224 -05:00 [DBG] Connection id "0HN30F2K7GTB4" completed keep alive response.
2024-04-19 08:59:38.224 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 08:59:38.225 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:38.225 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 08:59:38.226 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:7041/api/usuario/2 - 200 null application/json; charset=utf-8 55.9101ms
2024-04-19 08:59:42.429 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:7041/api/usuario/3 - null null
2024-04-19 08:59:42.430 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/3'
2024-04-19 08:59:42.430 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/3'
2024-04-19 08:59:42.431 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)'
2024-04-19 08:59:42.432 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:59:42.432 -05:00 [DBG] Successfully validated the token.
2024-04-19 08:59:42.433 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-04-19 08:59:42.433 -05:00 [DBG] Authorization was successful.
2024-04-19 08:59:42.434 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)'
2024-04-19 08:59:42.434 -05:00 [INF] Route matched with {action = "ConsultarUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] ConsultarUsuario(Int32) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 08:59:42.435 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 08:59:42.436 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 08:59:42.437 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 08:59:42.437 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 08:59:42.438 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 08:59:42.439 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 08:59:42.440 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 08:59:42.441 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-19 08:59:42.441 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-19 08:59:42.442 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 08:59:42.443 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 08:59:42.443 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-19 08:59:42.444 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-19 08:59:42.445 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 08:59:42.447 -05:00 [DBG] Creating DbConnection.
2024-04-19 08:59:42.447 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 08:59:42.448 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:42.448 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:42.449 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 08:59:42.449 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 08:59:42.450 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 08:59:42.451 -05:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
WHERE [u].[Id] = @__Id_0
2024-04-19 08:59:42.453 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
WHERE [u].[Id] = @__Id_0
2024-04-19 08:59:42.456 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:42.457 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:42.458 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:42.458 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:42.459 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-04-19 08:59:42.460 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:42.460 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 08:59:42.462 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 08:59:42.463 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 08:59:42.463 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 08:59:42.464 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 08:59:42.464 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 08:59:42.465 -05:00 [INF] Executing OkObjectResult, writing value of type 'PruebaUser.Core.DTOs.UsuarioDTO'.
2024-04-19 08:59:42.466 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api) in 26.6644ms
2024-04-19 08:59:42.466 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)'
2024-04-19 08:59:42.467 -05:00 [DBG] Connection id "0HN30F2K7GTB4" completed keep alive response.
2024-04-19 08:59:42.467 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 08:59:42.468 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:42.468 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 08:59:42.469 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:7041/api/usuario/3 - 200 null application/json; charset=utf-8 40.3792ms
2024-04-19 08:59:46.440 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:7041/api/usuario - null null
2024-04-19 08:59:46.442 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 08:59:46.442 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 08:59:46.443 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:59:46.444 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 08:59:46.444 -05:00 [DBG] Successfully validated the token.
2024-04-19 08:59:46.445 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-04-19 08:59:46.445 -05:00 [DBG] Authorization was successful.
2024-04-19 08:59:46.446 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:59:46.446 -05:00 [INF] Route matched with {action = "ListarUsuarios", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[PruebaUser.Core.DTOs.UsuarioDTO]]] ListarUsuarios() on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 08:59:46.447 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 08:59:46.448 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 08:59:46.449 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 08:59:46.449 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 08:59:46.450 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 08:59:46.451 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 08:59:46.452 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 08:59:46.453 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 08:59:46.454 -05:00 [DBG] Creating DbConnection.
2024-04-19 08:59:46.454 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 08:59:46.455 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:46.456 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:46.456 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 08:59:46.457 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 08:59:46.457 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 08:59:46.458 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
2024-04-19 08:59:46.461 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
2024-04-19 08:59:46.462 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.463 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.463 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.464 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.465 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.465 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.466 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.467 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.467 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.468 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.469 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.469 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.470 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.471 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.471 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.472 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.473 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.473 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 08:59:46.474 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:46.474 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 12ms reading results.
2024-04-19 08:59:46.475 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:46.476 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 08:59:46.477 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 08:59:46.478 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 08:59:46.478 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 08:59:46.479 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 08:59:46.479 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 08:59:46.480 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PruebaUser.Core.DTOs.UsuarioDTO, PruebaUser.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-19 08:59:46.480 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api) in 29.5677ms
2024-04-19 08:59:46.481 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 08:59:46.482 -05:00 [DBG] Connection id "0HN30F2K7GTB4" completed keep alive response.
2024-04-19 08:59:46.482 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 08:59:46.483 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 08:59:46.483 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 08:59:46.484 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:7041/api/usuario - 200 null application/json; charset=utf-8 43.9585ms
2024-04-19 09:25:29.625 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 09:25:29.680 -05:00 [DBG] Hosting starting
2024-04-19 09:25:29.698 -05:00 [INF] User profile is available. Using 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-19 09:25:29.703 -05:00 [DBG] Reading data from file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 09:25:29.709 -05:00 [DBG] Found key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2}.
2024-04-19 09:25:29.714 -05:00 [DBG] Considering key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with expiration date 2024-07-18 13:41:10Z as default key.
2024-04-19 09:25:29.716 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 09:25:29.718 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-19 09:25:29.719 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 09:25:29.721 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-19 09:25:29.722 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-19 09:25:29.723 -05:00 [DBG] Using key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} as the default key.
2024-04-19 09:25:29.724 -05:00 [DBG] Key ring with default key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} was loaded during application startup.
2024-04-19 09:25:29.830 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 09:25:29.830 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 09:25:29.831 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 09:25:29.831 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 09:25:29.832 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 09:25:29.832 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 09:25:29.833 -05:00 [INF] Hosting environment: Development
2024-04-19 09:25:29.833 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 09:25:29.834 -05:00 [DBG] Hosting started
2024-04-19 09:25:30.274 -05:00 [DBG] Connection id "0HN30FI8E50EF" received FIN.
2024-04-19 09:25:30.274 -05:00 [DBG] Connection id "0HN30FI8E50EE" received FIN.
2024-04-19 09:25:30.275 -05:00 [DBG] Connection id "0HN30FI8E50EE" accepted.
2024-04-19 09:25:30.275 -05:00 [DBG] Connection id "0HN30FI8E50EF" accepted.
2024-04-19 09:25:30.276 -05:00 [DBG] Connection id "0HN30FI8E50EE" started.
2024-04-19 09:25:30.276 -05:00 [DBG] Connection id "0HN30FI8E50EF" started.
2024-04-19 09:25:30.286 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 09:25:30.286 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 09:25:30.296 -05:00 [DBG] Connection id "0HN30FI8E50EE" stopped.
2024-04-19 09:25:30.296 -05:00 [DBG] Connection id "0HN30FI8E50EF" stopped.
2024-04-19 09:25:30.298 -05:00 [DBG] Connection id "0HN30FI8E50EE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 09:25:30.298 -05:00 [DBG] Connection id "0HN30FI8E50EF" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 09:25:30.444 -05:00 [DBG] Connection id "0HN30FI8E50EG" accepted.
2024-04-19 09:25:30.446 -05:00 [DBG] Connection id "0HN30FI8E50EG" started.
2024-04-19 09:25:30.475 -05:00 [DBG] Connection 0HN30FI8E50EG established using the following protocol: "Tls13"
2024-04-19 09:25:30.509 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 09:25:30.573 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 09:25:30.586 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 09:25:30.587 -05:00 [DBG] Request did not match any endpoints
2024-04-19 09:25:30.641 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 09:25:30.642 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 09:25:30.654 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 09:25:30.655 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 09:25:30.658 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 152.0363ms
2024-04-19 09:25:30.669 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 09:25:30.673 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 4.7171ms
2024-04-19 09:25:30.740 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 09:25:30.769 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 29.3563ms
2024-04-19 09:25:31.270 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 09:25:31.271 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 09:25:31.272 -05:00 [DBG] Request did not match any endpoints
2024-04-19 09:25:31.342 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.9665ms
2024-04-19 09:25:54.454 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/autenticar - application/json 60
2024-04-19 09:25:54.460 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 09:25:54.463 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 09:25:54.465 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:25:54.467 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:25:54.509 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:25:54.511 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:25:54.525 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 09:25:54.526 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:25:54.527 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:25:54.528 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:25:54.529 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:25:54.529 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:25:54.531 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:25:54.608 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-19 09:25:54.619 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:25:54.628 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:25:54.630 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 09:25:54.632 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:25:54.636 -05:00 [DBG] Connection id "0HN30FI8E50EG", Request id "0HN30FI8E50EG:00000009": started reading request body.
2024-04-19 09:25:54.636 -05:00 [DBG] Connection id "0HN30FI8E50EG", Request id "0HN30FI8E50EG:00000009": done reading request body.
2024-04-19 09:25:54.640 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 09:25:54.641 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:25:54.642 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:25:54.643 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:25:54.649 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:25:55.023 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:25:55.057 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .FirstOrDefault(u => u.Email == __loginUsuarioDTO_Email_0 && __passwordManager_1.VerifyPassword(
        enteredPassword: __loginUsuarioDTO_Clave_2, 
        storedPasswordHash: u.Clave))'
2024-04-19 09:25:55.210 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 678.0781ms
2024-04-19 09:25:55.211 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:25:55.213 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The LINQ expression 'DbSet<Usuario>()
    .Where(u => u.Email == __loginUsuarioDTO_Email_0 && __passwordManager_1.VerifyPassword(
        enteredPassword: __loginUsuarioDTO_Clave_2, 
        storedPasswordHash: u.Clave))' could not be translated. Additional information: Translation of method 'PruebaUser.Core.Interfaces.IPasswordManager.VerifyPassword' failed. If this method can be mapped to your custom function, see https://go.microsoft.com/fwlink/?linkid=2132413 for more information. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass9_0`1.<Execute>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at PruebaUser.Infraestructure.Services.LoginUsuario.DevolverToken(LoginUsuarioDTO loginUsuarioDTO) in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Infraestructure\Services\LoginUsuario.cs:line 51
   at PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar(LoginUsuarioDTO loginUsuarioDTO) in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api\Controllers\LoginUsuarioController.cs:line 23
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-19 09:25:55.237 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:25:55.240 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/autenticar - 500 null text/plain; charset=utf-8 785.4547ms
2024-04-19 09:29:26.208 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 09:29:26.271 -05:00 [DBG] Hosting starting
2024-04-19 09:29:26.292 -05:00 [INF] User profile is available. Using 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-19 09:29:26.297 -05:00 [DBG] Reading data from file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 09:29:26.303 -05:00 [DBG] Found key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2}.
2024-04-19 09:29:26.308 -05:00 [DBG] Considering key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with expiration date 2024-07-18 13:41:10Z as default key.
2024-04-19 09:29:26.311 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 09:29:26.312 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-19 09:29:26.314 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 09:29:26.316 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-19 09:29:26.317 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-19 09:29:26.319 -05:00 [DBG] Using key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} as the default key.
2024-04-19 09:29:26.319 -05:00 [DBG] Key ring with default key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} was loaded during application startup.
2024-04-19 09:29:26.443 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 09:29:26.444 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 09:29:26.444 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 09:29:26.445 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 09:29:26.445 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 09:29:26.446 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 09:29:26.446 -05:00 [INF] Hosting environment: Development
2024-04-19 09:29:26.447 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 09:29:26.447 -05:00 [DBG] Hosting started
2024-04-19 09:29:26.594 -05:00 [DBG] Connection id "0HN30FKERS7PN" accepted.
2024-04-19 09:29:26.594 -05:00 [DBG] Connection id "0HN30FKERS7PM" accepted.
2024-04-19 09:29:26.595 -05:00 [DBG] Connection id "0HN30FKERS7PN" started.
2024-04-19 09:29:26.595 -05:00 [DBG] Connection id "0HN30FKERS7PM" started.
2024-04-19 09:29:26.604 -05:00 [DBG] Connection id "0HN30FKERS7PM" received FIN.
2024-04-19 09:29:26.604 -05:00 [DBG] Connection id "0HN30FKERS7PN" received FIN.
2024-04-19 09:29:26.610 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 09:29:26.610 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 09:29:26.622 -05:00 [DBG] Connection id "0HN30FKERS7PN" stopped.
2024-04-19 09:29:26.622 -05:00 [DBG] Connection id "0HN30FKERS7PM" stopped.
2024-04-19 09:29:26.624 -05:00 [DBG] Connection id "0HN30FKERS7PN" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 09:29:26.624 -05:00 [DBG] Connection id "0HN30FKERS7PM" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 09:29:26.738 -05:00 [DBG] Connection id "0HN30FKERS7PO" accepted.
2024-04-19 09:29:26.739 -05:00 [DBG] Connection id "0HN30FKERS7PO" started.
2024-04-19 09:29:26.767 -05:00 [DBG] Connection 0HN30FKERS7PO established using the following protocol: "Tls13"
2024-04-19 09:29:26.805 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 09:29:26.867 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 09:29:26.878 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 09:29:26.878 -05:00 [DBG] Request did not match any endpoints
2024-04-19 09:29:26.927 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 09:29:26.929 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 09:29:26.940 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 09:29:26.941 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 09:29:26.943 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 141.0255ms
2024-04-19 09:29:26.955 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 09:29:26.959 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 4.5417ms
2024-04-19 09:29:27.015 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 09:29:27.044 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.4276ms
2024-04-19 09:29:27.496 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 09:29:27.497 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 09:29:27.498 -05:00 [DBG] Request did not match any endpoints
2024-04-19 09:29:27.575 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 79.3436ms
2024-04-19 09:29:43.420 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/autenticar - application/json 60
2024-04-19 09:29:43.425 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 09:29:43.427 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 09:29:43.428 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:29:43.430 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:29:43.470 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:29:43.472 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:29:43.487 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 09:29:43.488 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:29:43.489 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:29:43.490 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:29:43.491 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:29:43.491 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:29:43.492 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:29:43.568 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-19 09:29:43.579 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:29:43.587 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:29:43.589 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 09:29:43.590 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:29:43.594 -05:00 [DBG] Connection id "0HN30FKERS7PO", Request id "0HN30FKERS7PO:00000009": started reading request body.
2024-04-19 09:29:43.595 -05:00 [DBG] Connection id "0HN30FKERS7PO", Request id "0HN30FKERS7PO:00000009": done reading request body.
2024-04-19 09:29:43.598 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 09:29:43.599 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:29:43.600 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:29:43.600 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:29:43.605 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:29:43.982 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:29:44.028 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .FirstOrDefault(u => u.Email == __loginUsuarioDTO_Email_0)'
2024-04-19 09:29:44.144 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: new SingleQueryingEnumerable<Usuario>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Apellido (string) Required, 1], [Property: Usuario.Clave (string) Required, 2], [Property: Usuario.Documento (long) Required, 3], [Property: Usuario.Email (string) Required, 4], [Property: Usuario.Nombre (string) Required, 5], [Property: Usuario.TipoDocumentoId (int) Required FK Index, 6] }
            SELECT TOP(1) u.Id, u.Apellido, u.Clave, u.Documento, u.Email, u.Nombre, u.TipoDocumentoId
            FROM Usuario AS u
            WHERE u.Email == @__loginUsuarioDTO_Email_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Usuario>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 09:29:44.166 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:29:44.177 -05:00 [DBG] Created DbConnection. (10ms).
2024-04-19 09:29:44.179 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:29:44.340 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:29:44.343 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:29:44.347 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-04-19 09:29:44.353 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-04-19 09:29:44.358 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:29:44.398 -05:00 [INF] Executed DbCommand (41ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:29:44.423 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:29:44.440 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:29:44.444 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 42ms reading results.
2024-04-19 09:29:44.447 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:29:44.451 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (4ms).
2024-04-19 09:29:44.553 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 1059.901ms
2024-04-19 09:29:44.555 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:29:44.557 -05:00 [ERR] An unhandled exception has occurred while executing the request.
BCrypt.Net.SaltParseException: Invalid salt version
   at BCrypt.Net.BCrypt.HashPassword(String inputKey, String salt, Boolean enhancedEntropy, HashType hashType)
   at BCrypt.Net.BCrypt.Verify(String text, String hash, Boolean enhancedEntropy, HashType hashType)
   at BCrypt.Net.BCrypt.EnhancedVerify(String text, String hash, HashType hashType)
   at PruebaUser.Infraestructure.Services.PasswordManager.VerifyPassword(String enteredPassword, String storedPasswordHash) in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Infraestructure\Services\PasswordManager.cs:line 14
   at PruebaUser.Infraestructure.Services.LoginUsuario.DevolverToken(LoginUsuarioDTO loginUsuarioDTO) in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Infraestructure\Services\LoginUsuario.cs:line 56
   at PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar(LoginUsuarioDTO loginUsuarioDTO) in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api\Controllers\LoginUsuarioController.cs:line 23
   at lambda_method5(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-19 09:29:44.575 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:29:44.578 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:29:44.579 -05:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-19 09:29:44.581 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/autenticar - 500 null text/plain; charset=utf-8 1161.2011ms
2024-04-19 09:33:42.156 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 09:33:42.209 -05:00 [DBG] Hosting starting
2024-04-19 09:33:42.226 -05:00 [INF] User profile is available. Using 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-19 09:33:42.230 -05:00 [DBG] Reading data from file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 09:33:42.236 -05:00 [DBG] Found key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2}.
2024-04-19 09:33:42.241 -05:00 [DBG] Considering key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with expiration date 2024-07-18 13:41:10Z as default key.
2024-04-19 09:33:42.243 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 09:33:42.244 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-19 09:33:42.245 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 09:33:42.247 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-19 09:33:42.248 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-19 09:33:42.249 -05:00 [DBG] Using key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} as the default key.
2024-04-19 09:33:42.250 -05:00 [DBG] Key ring with default key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} was loaded during application startup.
2024-04-19 09:33:42.346 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 09:33:42.346 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 09:33:42.347 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 09:33:42.347 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 09:33:42.347 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 09:33:42.348 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 09:33:42.348 -05:00 [INF] Hosting environment: Development
2024-04-19 09:33:42.349 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 09:33:42.349 -05:00 [DBG] Hosting started
2024-04-19 09:33:42.553 -05:00 [DBG] Connection id "0HN30FMR4SP15" received FIN.
2024-04-19 09:33:42.553 -05:00 [DBG] Connection id "0HN30FMR4SP14" received FIN.
2024-04-19 09:33:42.554 -05:00 [DBG] Connection id "0HN30FMR4SP15" accepted.
2024-04-19 09:33:42.554 -05:00 [DBG] Connection id "0HN30FMR4SP14" accepted.
2024-04-19 09:33:42.555 -05:00 [DBG] Connection id "0HN30FMR4SP15" started.
2024-04-19 09:33:42.556 -05:00 [DBG] Connection id "0HN30FMR4SP14" started.
2024-04-19 09:33:42.564 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 09:33:42.564 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 09:33:42.575 -05:00 [DBG] Connection id "0HN30FMR4SP14" stopped.
2024-04-19 09:33:42.575 -05:00 [DBG] Connection id "0HN30FMR4SP15" stopped.
2024-04-19 09:33:42.577 -05:00 [DBG] Connection id "0HN30FMR4SP15" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 09:33:42.577 -05:00 [DBG] Connection id "0HN30FMR4SP14" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 09:33:42.860 -05:00 [DBG] Connection id "0HN30FMR4SP16" accepted.
2024-04-19 09:33:42.861 -05:00 [DBG] Connection id "0HN30FMR4SP16" started.
2024-04-19 09:33:42.890 -05:00 [DBG] Connection 0HN30FMR4SP16 established using the following protocol: "Tls13"
2024-04-19 09:33:42.926 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 09:33:42.982 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 09:33:42.993 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 09:33:42.994 -05:00 [DBG] Request did not match any endpoints
2024-04-19 09:33:43.040 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 09:33:43.042 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 09:33:43.052 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 09:33:43.053 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 09:33:43.055 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 133.5741ms
2024-04-19 09:33:43.065 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 09:33:43.070 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 5.0212ms
2024-04-19 09:33:43.123 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 09:33:43.149 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 26.3904ms
2024-04-19 09:33:43.622 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 09:33:43.624 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 09:33:43.625 -05:00 [DBG] Request did not match any endpoints
2024-04-19 09:33:43.717 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 95.601ms
2024-04-19 09:34:14.385 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/usuario - application/json 151
2024-04-19 09:34:14.393 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 09:34:14.395 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 09:34:14.397 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 09:34:14.399 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:34:14.433 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:34:14.435 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 09:34:14.448 -05:00 [INF] Route matched with {action = "CrearUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] CrearUsuario(PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 09:34:14.450 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:34:14.451 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:34:14.452 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:34:14.453 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:34:14.453 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:34:14.455 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 09:34:14.524 -05:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-04-19 09:34:14.576 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 09:34:14.583 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 09:34:14.585 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 09:34:14.586 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:34:14.592 -05:00 [DBG] Connection id "0HN30FMR4SP16", Request id "0HN30FMR4SP16:00000009": started reading request body.
2024-04-19 09:34:14.592 -05:00 [DBG] Connection id "0HN30FMR4SP16", Request id "0HN30FMR4SP16:00000009": done reading request body.
2024-04-19 09:34:14.596 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 09:34:14.597 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 09:34:14.598 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 09:34:14.598 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 09:34:14.605 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 09:34:14.607 -05:00 [DBG] The request has model state errors, returning an error response.
2024-04-19 09:34:14.608 -05:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2024-04-19 09:34:14.609 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:34:14.611 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2024-04-19 09:34:14.613 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-19 09:34:14.614 -05:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-04-19 09:34:14.615 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-04-19 09:34:14.616 -05:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-04-19 09:34:14.633 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api) in 176.3444ms
2024-04-19 09:34:14.633 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 09:34:14.635 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/usuario - 400 null application/problem+json; charset=utf-8 251.1811ms
2024-04-19 09:34:23.192 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/usuario - application/json 158
2024-04-19 09:34:23.194 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 09:34:23.195 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 09:34:23.196 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 09:34:23.197 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:34:23.198 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:34:23.201 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 09:34:23.203 -05:00 [INF] Route matched with {action = "CrearUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] CrearUsuario(PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 09:34:23.204 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:34:23.204 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:34:23.205 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:34:23.206 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:34:23.206 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:34:23.207 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 09:34:23.211 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 09:34:23.212 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 09:34:23.213 -05:00 [DBG] Attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 09:34:23.213 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:34:23.214 -05:00 [DBG] Connection id "0HN30FMR4SP16", Request id "0HN30FMR4SP16:0000000B": started reading request body.
2024-04-19 09:34:23.215 -05:00 [DBG] Connection id "0HN30FMR4SP16", Request id "0HN30FMR4SP16:0000000B": done reading request body.
2024-04-19 09:34:23.215 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 09:34:23.216 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 09:34:23.216 -05:00 [DBG] Done attempting to bind parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 09:34:23.217 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 09:34:23.218 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioCreacionDTO' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 09:34:23.587 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:34:23.639 -05:00 [DBG] Compiling query expression: 
'DbSet<TipoDocumento>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2024-04-19 09:34:23.760 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TipoDocumento>(
    asyncEnumerable: new SingleQueryingEnumerable<TipoDocumento>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TipoDocumento.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TipoDocumento.Descripcion (string) Required, 1] }
            SELECT TOP(1) t.Id, t.Descripcion
            FROM TipoDocumento AS t
            WHERE t.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TipoDocumento>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 09:34:23.787 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:34:23.799 -05:00 [DBG] Created DbConnection. (10ms).
2024-04-19 09:34:23.802 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:23.960 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:23.963 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:34:23.967 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2024-04-19 09:34:23.972 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2024-04-19 09:34:23.978 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 09:34:24.021 -05:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 09:34:24.047 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:34:24.059 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.064 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 38ms reading results.
2024-04-19 09:34:24.066 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.070 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (4ms).
2024-04-19 09:34:24.073 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Any(usuario => usuario.Documento == __documento_0)'
2024-04-19 09:34:24.079 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Usuario AS u
                WHERE u.Documento == @__documento_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 09:34:24.086 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.087 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.088 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:34:24.088 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:34:24.089 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:34:24.089 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 09:34:24.093 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 09:34:24.095 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.096 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 09:34:24.096 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.097 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:34:24.100 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Any(usuario => usuario.Email == __emailNuevo_0 && True)'
2024-04-19 09:34:24.102 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Usuario AS u
                WHERE (u.Email == @__emailNuevo_0) && CAST(1 AS bit))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 09:34:24.104 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.105 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.105 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:34:24.106 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:34:24.106 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:34:24.107 -05:00 [DBG] Executing DbCommand [Parameters=[@__emailNuevo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 09:34:24.109 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__emailNuevo_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 09:34:24.110 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.111 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 09:34:24.111 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.112 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:34:24.875 -05:00 [DBG] 'UserDBContext' generated a temporary value for the property 'Usuario.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:34:24.896 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:34:24.899 -05:00 [DBG] SaveChanges starting for 'UserDBContext'.
2024-04-19 09:34:24.902 -05:00 [DBG] DetectChanges starting for 'UserDBContext'.
2024-04-19 09:34:24.911 -05:00 [DBG] DetectChanges completed for 'UserDBContext'.
2024-04-19 09:34:24.957 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.958 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.960 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:34:24.961 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:34:24.961 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:34:24.962 -05:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Usuario] ([Apellido], [Clave], [Documento], [Email], [Nombre], [TipoDocumentoId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-04-19 09:34:24.965 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Usuario] ([Apellido], [Clave], [Documento], [Email], [Nombre], [TipoDocumentoId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2024-04-19 09:34:24.975 -05:00 [DBG] The foreign key property 'Usuario.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 09:34:24.979 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.979 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 13ms reading results.
2024-04-19 09:34:24.981 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:24.981 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:34:24.989 -05:00 [DBG] An entity of type 'Usuario' tracked by 'UserDBContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:34:24.991 -05:00 [DBG] SaveChanges completed for 'UserDBContext' with 1 entities written to the database.
2024-04-19 09:34:24.995 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:34:24.996 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 09:34:24.997 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-19 09:34:24.997 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:34:24.998 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:34:24.998 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 09:34:24.999 -05:00 [INF] Executing CreatedAtRouteResult, writing value of type 'PruebaUser.Core.DTOs.UsuarioDTO'.
2024-04-19 09:34:25.009 -05:00 [DBG] Found the endpoints ["PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)"] for address obtenerUsuario(id=[11])
2024-04-19 09:34:25.011 -05:00 [DBG] Successfully processed template api/usuario/{id} for PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api) resulting in /api/usuario/11 and 
2024-04-19 09:34:25.012 -05:00 [DBG] Link generation succeeded for endpoints ["PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)"] with result /api/usuario/11
2024-04-19 09:34:25.016 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api) in 1808.8735ms
2024-04-19 09:34:25.017 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.CrearUsuario (PruebaUser.Api)'
2024-04-19 09:34:25.019 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:34:25.022 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:34:25.024 -05:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-19 09:34:25.025 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/usuario - 201 null application/json; charset=utf-8 1832.7537ms
2024-04-19 09:34:35.488 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 09:34:35.489 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 09:34:35.490 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 09:34:35.491 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:34:35.491 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:34:35.493 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:34:35.496 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 09:34:35.498 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 09:34:35.501 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 09:34:35.502 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 401 0 null 14.123ms
2024-04-19 09:34:54.206 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario/11 - null null
2024-04-19 09:34:54.208 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/11'
2024-04-19 09:34:54.209 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/11'
2024-04-19 09:34:54.210 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ConsultarUsuario (PruebaUser.Api)'
2024-04-19 09:34:54.211 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:34:54.211 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:34:54.213 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 09:34:54.213 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 09:34:54.214 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 09:34:54.214 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario/11 - 401 0 null 7.7706ms
2024-04-19 09:35:12.931 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/autenticar - application/json 63
2024-04-19 09:35:12.933 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 09:35:12.933 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 09:35:12.934 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:35:12.935 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:35:12.935 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:35:12.935 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:35:12.939 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 09:35:12.940 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:35:12.940 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:35:12.941 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:35:12.941 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:35:12.942 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:35:12.942 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:35:12.944 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:35:12.945 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:35:12.945 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 09:35:12.946 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:35:12.947 -05:00 [DBG] Connection id "0HN30FMR4SP16", Request id "0HN30FMR4SP16:00000011": started reading request body.
2024-04-19 09:35:12.948 -05:00 [DBG] Connection id "0HN30FMR4SP16", Request id "0HN30FMR4SP16:00000011": done reading request body.
2024-04-19 09:35:12.949 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 09:35:12.950 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:35:12.951 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:35:12.951 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:35:12.954 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:35:12.985 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:35:12.987 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .FirstOrDefault(u => u.Email == __loginUsuarioDTO_Email_0)'
2024-04-19 09:35:12.990 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: new SingleQueryingEnumerable<Usuario>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Apellido (string) Required, 1], [Property: Usuario.Clave (string) Required, 2], [Property: Usuario.Documento (long) Required, 3], [Property: Usuario.Email (string) Required, 4], [Property: Usuario.Nombre (string) Required, 5], [Property: Usuario.TipoDocumentoId (int) Required FK Index, 6] }
            SELECT TOP(1) u.Id, u.Apellido, u.Clave, u.Documento, u.Email, u.Nombre, u.TipoDocumentoId
            FROM Usuario AS u
            WHERE u.Email == @__loginUsuarioDTO_Email_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Usuario>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 09:35:12.991 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:35:12.992 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:35:12.992 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:35:12.993 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:35:12.993 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:35:12.994 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:35:12.995 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:35:12.995 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:35:12.998 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:35:12.999 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:35:13.000 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:35:13.000 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 09:35:13.001 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:35:13.002 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:35:13.457 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:35:13.458 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 09:35:13.458 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-19 09:35:13.459 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:35:13.459 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:35:13.460 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 09:35:13.460 -05:00 [INF] Executing OkObjectResult, writing value of type 'PruebaUser.Core.DTOs.LoginResponse'.
2024-04-19 09:35:13.463 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 520.3399ms
2024-04-19 09:35:13.464 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:35:13.464 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:35:13.465 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:35:13.466 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 09:35:13.467 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/autenticar - 200 null application/json; charset=utf-8 535.4618ms
2024-04-19 09:36:05.579 -05:00 [DBG] Connection id "0HN30FMR4SP17" accepted.
2024-04-19 09:36:05.579 -05:00 [DBG] Connection id "0HN30FMR4SP17" received FIN.
2024-04-19 09:36:05.583 -05:00 [DBG] Connection id "0HN30FMR4SP17" started.
2024-04-19 09:36:05.587 -05:00 [DBG] Connection id "0HN30FMR4SP18" accepted.
2024-04-19 09:36:05.588 -05:00 [DBG] Connection id "0HN30FMR4SP18" started.
2024-04-19 09:36:05.588 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 09:36:05.589 -05:00 [DBG] Connection id "0HN30FMR4SP17" stopped.
2024-04-19 09:36:05.590 -05:00 [DBG] Connection id "0HN30FMR4SP17" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 09:36:05.591 -05:00 [DBG] Connection 0HN30FMR4SP18 established using the following protocol: "Tls13"
2024-04-19 09:36:05.595 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:7041/api/usuario - null null
2024-04-19 09:36:05.596 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 09:36:05.596 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 09:36:05.597 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:36:05.597 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:36:05.621 -05:00 [DBG] Successfully validated the token.
2024-04-19 09:36:05.623 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-04-19 09:36:05.624 -05:00 [DBG] Authorization was successful.
2024-04-19 09:36:05.625 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:36:05.627 -05:00 [INF] Route matched with {action = "ListarUsuarios", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[PruebaUser.Core.DTOs.UsuarioDTO]]] ListarUsuarios() on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 09:36:05.628 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:36:05.628 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:36:05.629 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:36:05.630 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:36:05.630 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:36:05.631 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 09:36:05.633 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 09:36:05.641 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:36:05.646 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Include(usuario => usuario.TipoDocumento)'
2024-04-19 09:36:05.653 -05:00 [DBG] Including navigation: 'Usuario.TipoDocumento'.
2024-04-19 09:36:05.673 -05:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Usuario>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Apellido (string) Required, 1], [Property: Usuario.Clave (string) Required, 2], [Property: Usuario.Documento (long) Required, 3], [Property: Usuario.Email (string) Required, 4], [Property: Usuario.Nombre (string) Required, 5], [Property: Usuario.TipoDocumentoId (int) Required FK Index, 6] }
            1 -> Dictionary<IProperty, int> { [Property: TipoDocumento.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: TipoDocumento.Descripcion (string) Required, 8] }
        SELECT u.Id, u.Apellido, u.Clave, u.Documento, u.Email, u.Nombre, u.TipoDocumentoId, t.Id, t.Descripcion
        FROM Usuario AS u
        INNER JOIN TipoDocumento AS t ON u.TipoDocumentoId == t.Id), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Usuario>, 
    PruebaUser.Infraestructure.UserDBContext, 
    False, 
    False, 
    True
)'
2024-04-19 09:36:05.674 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:36:05.675 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:36:05.675 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:05.676 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:05.676 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:36:05.676 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:36:05.677 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:36:05.678 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
2024-04-19 09:36:05.681 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
2024-04-19 09:36:05.682 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.685 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.686 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.687 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.688 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.689 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.689 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.690 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.690 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.691 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.691 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.692 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.692 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.693 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.693 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.694 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.694 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.695 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.695 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:05.696 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:05.696 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 14ms reading results.
2024-04-19 09:36:05.697 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:05.698 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:36:05.705 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:36:05.707 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 09:36:05.707 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:36:05.707 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:36:05.708 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 09:36:05.708 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PruebaUser.Core.DTOs.UsuarioDTO, PruebaUser.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-19 09:36:05.710 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api) in 78.7949ms
2024-04-19 09:36:05.710 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:36:05.711 -05:00 [DBG] Connection id "0HN30FMR4SP18" completed keep alive response.
2024-04-19 09:36:05.712 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:36:05.712 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:05.713 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 09:36:05.713 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:7041/api/usuario - 200 null application/json; charset=utf-8 118.8784ms
2024-04-19 09:36:38.298 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:7041/api/autenticar - application/json 66
2024-04-19 09:36:38.299 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 09:36:38.300 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 09:36:38.301 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:36:38.301 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:36:38.305 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:36:38 p.m.'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-04-19 09:36:38.306 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:36:38 p.m.'.
2024-04-19 09:36:38.307 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:36:38.308 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 09:36:38.308 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:36:38.309 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:36:38.310 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:36:38.311 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:36:38.311 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:36:38.312 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:36:38.313 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:36:38.314 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:36:38.315 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 09:36:38.315 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:36:38.316 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000002": started reading request body.
2024-04-19 09:36:38.317 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000002": done reading request body.
2024-04-19 09:36:38.318 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 09:36:38.318 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:36:38.319 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:36:38.320 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:36:38.320 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:36:38.321 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:36:38.324 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:36:38.325 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:36:38.325 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:38.326 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:38.326 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:36:38.327 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:36:38.327 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:36:38.328 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:36:38.331 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:36:38.333 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:38.333 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:38.334 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 09:36:38.335 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:38.335 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:36:38.762 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:36:38.763 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 09:36:38.764 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:36:38.764 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:36:38.765 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 09:36:38.766 -05:00 [INF] Executing OkObjectResult, writing value of type 'PruebaUser.Core.DTOs.LoginResponse'.
2024-04-19 09:36:38.767 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 454.6141ms
2024-04-19 09:36:38.768 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:36:38.768 -05:00 [DBG] Connection id "0HN30FMR4SP18" completed keep alive response.
2024-04-19 09:36:38.769 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:36:38.770 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:38.770 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 09:36:38.771 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:7041/api/autenticar - 200 null application/json; charset=utf-8 473.115ms
2024-04-19 09:36:51.784 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:7041/api/autenticar - application/json 67
2024-04-19 09:36:51.786 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 09:36:51.787 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 09:36:51.787 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:36:51.788 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:36:51.789 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:36:51 p.m.'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-04-19 09:36:51.790 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:36:51 p.m.'.
2024-04-19 09:36:51.791 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:36:51.791 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 09:36:51.792 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:36:51.793 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:36:51.794 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:36:51.794 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:36:51.795 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:36:51.796 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:36:51.797 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:36:51.798 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:36:51.799 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 09:36:51.799 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:36:51.800 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000003": started reading request body.
2024-04-19 09:36:51.801 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000003": done reading request body.
2024-04-19 09:36:51.801 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 09:36:51.802 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:36:51.803 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:36:51.803 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:36:51.804 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:36:51.805 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:36:51.806 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:36:51.807 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:36:51.807 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:51.808 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:51.808 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:36:51.809 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:36:51.809 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:36:51.810 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:36:51.812 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:36:51.813 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:36:51.813 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:51.814 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 09:36:51.814 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:51.815 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:36:52.242 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:36:52.244 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 09:36:52.244 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:36:52.244 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:36:52.245 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 09:36:52.245 -05:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2024-04-19 09:36:52.246 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 450.5411ms
2024-04-19 09:36:52.247 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:36:52.248 -05:00 [DBG] Connection id "0HN30FMR4SP18" completed keep alive response.
2024-04-19 09:36:52.248 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:36:52.249 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:52.250 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 09:36:52.250 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:7041/api/autenticar - 401 null text/plain; charset=utf-8 465.8814ms
2024-04-19 09:36:55.558 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:7041/api/autenticar - application/json 68
2024-04-19 09:36:55.559 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 09:36:55.560 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 09:36:55.561 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:36:55.561 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:36:55.562 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:36:55 p.m.'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-04-19 09:36:55.563 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:36:55 p.m.'.
2024-04-19 09:36:55.564 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:36:55.565 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 09:36:55.565 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:36:55.566 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:36:55.567 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:36:55.568 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:36:55.569 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:36:55.569 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:36:55.570 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:36:55.571 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:36:55.572 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 09:36:55.572 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:36:55.573 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000004": started reading request body.
2024-04-19 09:36:55.573 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000004": done reading request body.
2024-04-19 09:36:55.574 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 09:36:55.574 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:36:55.575 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:36:55.576 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:36:55.576 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:36:55.578 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:36:55.579 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:36:55.579 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:36:55.580 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:55.581 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:55.581 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:36:55.582 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:36:55.582 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:36:55.583 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:36:55.585 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:36:55.586 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:55.587 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 09:36:55.587 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:55.588 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:36:55.588 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:36:55.589 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 09:36:55.590 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:36:55.590 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:36:55.591 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 09:36:55.591 -05:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2024-04-19 09:36:55.592 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 22.7949ms
2024-04-19 09:36:55.593 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:36:55.593 -05:00 [DBG] Connection id "0HN30FMR4SP18" completed keep alive response.
2024-04-19 09:36:55.594 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:36:55.594 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:36:55.595 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 09:36:55.596 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:7041/api/autenticar - 401 null text/plain; charset=utf-8 38.0254ms
2024-04-19 09:37:23.813 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/autenticar - application/json 60
2024-04-19 09:37:23.817 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 09:37:23.818 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 09:37:23.819 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:37:23.819 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:37:23.820 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:37:23.820 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:37:23.821 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 09:37:23.822 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:37:23.823 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:37:23.823 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:37:23.824 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:37:23.825 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:37:23.826 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:37:23.826 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:37:23.827 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:37:23.828 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 09:37:23.828 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:37:23.829 -05:00 [DBG] Connection id "0HN30FMR4SP16", Request id "0HN30FMR4SP16:00000013": started reading request body.
2024-04-19 09:37:23.830 -05:00 [DBG] Connection id "0HN30FMR4SP16", Request id "0HN30FMR4SP16:00000013": done reading request body.
2024-04-19 09:37:23.830 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 09:37:23.831 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:37:23.831 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:37:23.832 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:37:23.832 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:37:23.834 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:37:23.836 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:37:23.836 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:37:23.837 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:37:23.838 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:37:23.839 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:37:23.839 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:37:23.840 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:37:23.840 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:37:23.843 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:37:23.846 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:37:23.847 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:37:23.848 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 09:37:23.849 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:37:23.849 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:37:23.890 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 64.4565ms
2024-04-19 09:37:23.891 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:37:23.893 -05:00 [ERR] An unhandled exception has occurred while executing the request.
BCrypt.Net.SaltParseException: Invalid salt version
   at BCrypt.Net.BCrypt.HashPassword(String inputKey, String salt, Boolean enhancedEntropy, HashType hashType)
   at BCrypt.Net.BCrypt.Verify(String text, String hash, Boolean enhancedEntropy, HashType hashType)
   at BCrypt.Net.BCrypt.EnhancedVerify(String text, String hash, HashType hashType)
   at PruebaUser.Infraestructure.Services.PasswordManager.VerifyPassword(String enteredPassword, String storedPasswordHash) in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Infraestructure\Services\PasswordManager.cs:line 14
   at PruebaUser.Infraestructure.Services.LoginUsuario.DevolverToken(LoginUsuarioDTO loginUsuarioDTO) in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Infraestructure\Services\LoginUsuario.cs:line 56
   at PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar(LoginUsuarioDTO loginUsuarioDTO) in C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api\Controllers\LoginUsuarioController.cs:line 23
   at lambda_method135(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-04-19 09:37:23.906 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:37:23.906 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:37:23.907 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 09:37:23.908 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/autenticar - 500 null text/plain; charset=utf-8 95.4573ms
2024-04-19 09:38:56.226 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 09:38:56.229 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 09:38:56.230 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 09:38:56.230 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:38:56.231 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:38:56.231 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:38:56.232 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 09:38:56.233 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 09:38:56.233 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 09:38:56.234 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 401 0 null 10.0358ms
2024-04-19 09:39:05.519 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:7041/api/autenticar - application/json 68
2024-04-19 09:39:05.520 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 09:39:05.521 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 09:39:05.522 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:39:05.523 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:39:05.524 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:39:05 p.m.'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-04-19 09:39:05.526 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:39:05 p.m.'.
2024-04-19 09:39:05.526 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:39:05.527 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 09:39:05.528 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:39:05.528 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:39:05.529 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:39:05.530 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:39:05.531 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:39:05.531 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:39:05.532 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:39:05.533 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:39:05.534 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 09:39:05.535 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:39:05.537 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000005": started reading request body.
2024-04-19 09:39:05.537 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000005": done reading request body.
2024-04-19 09:39:05.538 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 09:39:05.539 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:39:05.539 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:39:05.540 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:39:05.541 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:39:05.542 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:39:05.543 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:39:05.544 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:39:05.544 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:05.545 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:05.546 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:39:05.546 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:39:05.547 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:39:05.548 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:39:05.555 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:39:05.557 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:05.558 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 09:39:05.558 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:05.559 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:39:05.560 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:39:05.561 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 09:39:05.561 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:39:05.562 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:39:05.562 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 09:39:05.563 -05:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2024-04-19 09:39:05.564 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 32.2599ms
2024-04-19 09:39:05.564 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:39:05.565 -05:00 [DBG] Connection id "0HN30FMR4SP18" completed keep alive response.
2024-04-19 09:39:05.565 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:39:05.567 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:05.567 -05:00 [DBG] Disposed connection to database '' on server '' (1ms).
2024-04-19 09:39:05.568 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:7041/api/autenticar - 401 null text/plain; charset=utf-8 49.6789ms
2024-04-19 09:39:08.497 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:7041/api/autenticar - application/json 67
2024-04-19 09:39:08.499 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 09:39:08.499 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 09:39:08.500 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:39:08.500 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:39:08.501 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:39:08 p.m.'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-04-19 09:39:08.503 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:39:08 p.m.'.
2024-04-19 09:39:08.503 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:39:08.504 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 09:39:08.505 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:39:08.506 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:39:08.506 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:39:08.507 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:39:08.508 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:39:08.509 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:39:08.510 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:39:08.510 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:39:08.511 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 09:39:08.512 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:39:08.512 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000006": started reading request body.
2024-04-19 09:39:08.513 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000006": done reading request body.
2024-04-19 09:39:08.514 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 09:39:08.514 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:39:08.515 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:39:08.515 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:39:08.516 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:39:08.517 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:39:08.519 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:39:08.519 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:39:08.520 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:08.521 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:08.521 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:39:08.522 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:39:08.523 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:39:08.523 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:39:08.525 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:39:08.527 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:08.527 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:08.528 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 09:39:08.529 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:08.529 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:39:08.962 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:39:08.964 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 09:39:08.964 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:39:08.965 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:39:08.965 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2024-04-19 09:39:08.966 -05:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2024-04-19 09:39:08.966 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 457.7141ms
2024-04-19 09:39:08.967 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:39:08.968 -05:00 [DBG] Connection id "0HN30FMR4SP18" completed keep alive response.
2024-04-19 09:39:08.969 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:39:08.970 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:08.970 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 09:39:08.971 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:7041/api/autenticar - 401 null text/plain; charset=utf-8 474.1781ms
2024-04-19 09:39:11.666 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:7041/api/autenticar - application/json 66
2024-04-19 09:39:11.667 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 09:39:11.668 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 09:39:11.669 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:39:11.669 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:39:11.670 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:39:11 p.m.'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-04-19 09:39:11.672 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:39:11 p.m.'.
2024-04-19 09:39:11.673 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:39:11.673 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 09:39:11.674 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:39:11.675 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:39:11.676 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:39:11.676 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:39:11.677 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:39:11.678 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:39:11.678 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:39:11.679 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:39:11.680 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 09:39:11.680 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:39:11.681 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000007": started reading request body.
2024-04-19 09:39:11.682 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000007": done reading request body.
2024-04-19 09:39:11.682 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 09:39:11.683 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:39:11.683 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:39:11.684 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:39:11.684 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:39:11.686 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:39:11.687 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:39:11.687 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:39:11.688 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:11.689 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:11.689 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:39:11.690 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:39:11.690 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:39:11.691 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:39:11.693 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:39:11.694 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:11.695 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:11.695 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 09:39:11.696 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:11.696 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:39:12.126 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:39:12.128 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 09:39:12.128 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:39:12.128 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:39:12.129 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 09:39:12.129 -05:00 [INF] Executing OkObjectResult, writing value of type 'PruebaUser.Core.DTOs.LoginResponse'.
2024-04-19 09:39:12.130 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 452.2718ms
2024-04-19 09:39:12.131 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:39:12.131 -05:00 [DBG] Connection id "0HN30FMR4SP18" completed keep alive response.
2024-04-19 09:39:12.133 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:39:12.134 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:12.135 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 09:39:12.136 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:7041/api/autenticar - 200 null application/json; charset=utf-8 469.68ms
2024-04-19 09:39:19.889 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 09:39:19.892 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 09:39:19.893 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 09:39:19.894 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:39:19.894 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:39:19.895 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:39:19.895 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 09:39:19.896 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 09:39:19.897 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 09:39:19.898 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 401 0 null 9.0372ms
2024-04-19 09:39:50.310 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:7041/api/usuario - null null
2024-04-19 09:39:50.314 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 09:39:50.314 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 09:39:50.315 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:39:50.316 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:39:50.316 -05:00 [DBG] Successfully validated the token.
2024-04-19 09:39:50.317 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-04-19 09:39:50.317 -05:00 [DBG] Authorization was successful.
2024-04-19 09:39:50.318 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:39:50.318 -05:00 [INF] Route matched with {action = "ListarUsuarios", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[PruebaUser.Core.DTOs.UsuarioDTO]]] ListarUsuarios() on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 09:39:50.319 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:39:50.320 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:39:50.320 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:39:50.321 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:39:50.322 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:39:50.323 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 09:39:50.323 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 09:39:50.325 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:39:50.326 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:39:50.326 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:39:50.327 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:50.328 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:50.328 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:39:50.329 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:39:50.329 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:39:50.330 -05:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
2024-04-19 09:39:50.334 -05:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId], [t].[Id], [t].[Descripcion]
FROM [Usuario] AS [u]
INNER JOIN [TipoDocumento] AS [t] ON [u].[TipoDocumentoId] = [t].[Id]
2024-04-19 09:39:50.335 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.336 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.337 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.337 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.338 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.339 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.339 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.340 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.341 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.341 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.342 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.342 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.343 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.344 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.344 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.345 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.346 -05:00 [DBG] The navigation 'Usuario.TipoDocumento' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.346 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.347 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:39:50.348 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:50.348 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 13ms reading results.
2024-04-19 09:39:50.349 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:50.350 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:39:50.351 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:39:50.352 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 09:39:50.352 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:39:50.352 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:39:50.353 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 09:39:50.353 -05:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[PruebaUser.Core.DTOs.UsuarioDTO, PruebaUser.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-04-19 09:39:50.354 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api) in 31.633ms
2024-04-19 09:39:50.355 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:39:50.355 -05:00 [DBG] Connection id "0HN30FMR4SP18" completed keep alive response.
2024-04-19 09:39:50.356 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:39:50.356 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:39:50.357 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 09:39:50.358 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:7041/api/usuario - 200 null application/json; charset=utf-8 48.1042ms
2024-04-19 09:40:25.335 -05:00 [INF] Request starting HTTP/2 POST https://localhost:7041/api/autenticar - application/json 63
2024-04-19 09:40:25.339 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 09:40:25.340 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 09:40:25.341 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:40:25.341 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:40:25.342 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:40:25.342 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:40:25.343 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 09:40:25.344 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:40:25.344 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:40:25.345 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:40:25.346 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:40:25.347 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:40:25.347 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:40:25.348 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:40:25.349 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:40:25.349 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 09:40:25.350 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:40:25.351 -05:00 [DBG] Connection id "0HN30FMR4SP16", Request id "0HN30FMR4SP16:00000019": started reading request body.
2024-04-19 09:40:25.351 -05:00 [DBG] Connection id "0HN30FMR4SP16", Request id "0HN30FMR4SP16:00000019": done reading request body.
2024-04-19 09:40:25.352 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 09:40:25.352 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:40:25.353 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:40:25.354 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:40:25.355 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:40:25.356 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:40:25.357 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:40:25.357 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:40:25.358 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:40:25.359 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:40:25.359 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:40:25.360 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:40:25.360 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:40:25.361 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:40:25.363 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:40:25.364 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:40:25.365 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:40:25.366 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 09:40:25.367 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:40:25.367 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:40:25.794 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:40:25.795 -05:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2024-04-19 09:40:25.795 -05:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2024-04-19 09:40:25.796 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:40:25.796 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:40:25.797 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 09:40:25.797 -05:00 [INF] Executing OkObjectResult, writing value of type 'PruebaUser.Core.DTOs.LoginResponse'.
2024-04-19 09:40:25.798 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 450.6854ms
2024-04-19 09:40:25.800 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:40:25.802 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:40:25.802 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:40:25.803 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 09:40:25.804 -05:00 [INF] Request finished HTTP/2 POST https://localhost:7041/api/autenticar - 200 null application/json; charset=utf-8 468.2857ms
2024-04-19 09:40:33.734 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 09:40:33.735 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 09:40:33.736 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 09:40:33.737 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:40:33.737 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:40:33.738 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:40:33.738 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 09:40:33.739 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 09:40:33.739 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 09:40:33.740 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 401 0 null 5.8696ms
2024-04-19 09:41:40.257 -05:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7041/api/usuario - application/json 176
2024-04-19 09:41:40.261 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 09:41:40.262 -05:00 [DBG] Request matched endpoint '405 HTTP Method Not Supported'
2024-04-19 09:41:40.262 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:41:40.263 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:40:12 p.m.', Current time (UTC): '19/04/2024 2:41:40 p.m.'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-04-19 09:41:40.265 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:40:12 p.m.', Current time (UTC): '19/04/2024 2:41:40 p.m.'.
2024-04-19 09:41:40.265 -05:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2024-04-19 09:41:40.266 -05:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2024-04-19 09:41:40.266 -05:00 [DBG] Connection id "0HN30FMR4SP18" completed keep alive response.
2024-04-19 09:41:40.267 -05:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7041/api/usuario - 405 0 null 10.0011ms
2024-04-19 09:41:40.268 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000009": started reading request body.
2024-04-19 09:41:40.269 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:00000009": done reading request body.
2024-04-19 09:42:06.334 -05:00 [INF] Request starting HTTP/2 PUT https://localhost:7041/api/usuario/1 - application/json 146
2024-04-19 09:42:06.336 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/1'
2024-04-19 09:42:06.336 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/1'
2024-04-19 09:42:06.337 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 09:42:06.338 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:42:06.338 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:42:06.339 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 09:42:06.339 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 09:42:06.340 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 09:42:06.340 -05:00 [INF] Request finished HTTP/2 PUT https://localhost:7041/api/usuario/1 - 401 0 null 7.4326ms
2024-04-19 09:42:06.344 -05:00 [DBG] Connection id "0HN30FMR4SP16", Request id "0HN30FMR4SP16:0000001D": started reading request body.
2024-04-19 09:42:06.345 -05:00 [DBG] Connection id "0HN30FMR4SP16", Request id "0HN30FMR4SP16:0000001D": done reading request body.
2024-04-19 09:42:19.337 -05:00 [INF] Request starting HTTP/1.1 POST https://localhost:7041/api/autenticar - application/json 66
2024-04-19 09:42:19.339 -05:00 [DBG] 1 candidate(s) found for the request path '/api/autenticar'
2024-04-19 09:42:19.339 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)' with route pattern 'api/autenticar' is valid for the request path '/api/autenticar'
2024-04-19 09:42:19.340 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:42:19.340 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:42:19.341 -05:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:42:19 p.m.'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-04-19 09:42:19.342 -05:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2024 2:36:13 p.m.', Current time (UTC): '19/04/2024 2:42:19 p.m.'.
2024-04-19 09:42:19.343 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:42:19.344 -05:00 [INF] Route matched with {action = "Autenticar", controller = "LoginUsuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.LoginResponse]] Autenticar(PruebaUser.Core.DTOs.LoginUsuarioDTO) on controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api).
2024-04-19 09:42:19.345 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:42:19.345 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:42:19.346 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:42:19.347 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:42:19.347 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:42:19.348 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:42:19.349 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.LoginUsuarioController (PruebaUser.Api)
2024-04-19 09:42:19.350 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:42:19.350 -05:00 [DBG] Attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' using the name '' in request data ...
2024-04-19 09:42:19.351 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:42:19.352 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:0000000A": started reading request body.
2024-04-19 09:42:19.352 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:0000000A": done reading request body.
2024-04-19 09:42:19.353 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'
2024-04-19 09:42:19.353 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:42:19.354 -05:00 [DBG] Done attempting to bind parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:42:19.355 -05:00 [DBG] Attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO' ...
2024-04-19 09:42:19.356 -05:00 [DBG] Done attempting to validate the bound parameter 'loginUsuarioDTO' of type 'PruebaUser.Core.DTOs.LoginUsuarioDTO'.
2024-04-19 09:42:19.357 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:42:19.358 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:42:19.358 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:42:19.359 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:19.359 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:19.360 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:42:19.361 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:42:19.361 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:42:19.362 -05:00 [DBG] Executing DbCommand [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:42:19.369 -05:00 [INF] Executed DbCommand (7ms) [Parameters=[@__loginUsuarioDTO_Email_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Email] = @__loginUsuarioDTO_Email_0
2024-04-19 09:42:19.370 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:42:19.371 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:19.372 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 2ms reading results.
2024-04-19 09:42:19.373 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:19.373 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:42:19.814 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:42:19.816 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 09:42:19.816 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:42:19.817 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:42:19.817 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 09:42:19.818 -05:00 [INF] Executing OkObjectResult, writing value of type 'PruebaUser.Core.DTOs.LoginResponse'.
2024-04-19 09:42:19.818 -05:00 [INF] Executed action PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api) in 470.2153ms
2024-04-19 09:42:19.819 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.LoginUsuarioController.Autenticar (PruebaUser.Api)'
2024-04-19 09:42:19.820 -05:00 [DBG] Connection id "0HN30FMR4SP18" completed keep alive response.
2024-04-19 09:42:19.820 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:42:19.821 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:19.821 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 09:42:19.822 -05:00 [INF] Request finished HTTP/1.1 POST https://localhost:7041/api/autenticar - 200 null application/json; charset=utf-8 485.0948ms
2024-04-19 09:42:28.499 -05:00 [INF] Request starting HTTP/1.1 PUT https://localhost:7041/api/usuario/1 - application/json 176
2024-04-19 09:42:28.500 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario/1'
2024-04-19 09:42:28.501 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)' with route pattern 'api/usuario/{id}' is valid for the request path '/api/usuario/1'
2024-04-19 09:42:28.502 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 09:42:28.502 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:42:28.503 -05:00 [DBG] Successfully validated the token.
2024-04-19 09:42:28.503 -05:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2024-04-19 09:42:28.504 -05:00 [DBG] Authorization was successful.
2024-04-19 09:42:28.504 -05:00 [INF] Executing endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 09:42:28.508 -05:00 [INF] Route matched with {action = "ActualizarUsuario", controller = "Usuario"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[PruebaUser.Core.DTOs.UsuarioDTO]] ActualizarUsuario(Int32, PruebaUser.Core.DTOs.UsuarioCreacionDTO) on controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api).
2024-04-19 09:42:28.509 -05:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-04-19 09:42:28.510 -05:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-04-19 09:42:28.511 -05:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-04-19 09:42:28.511 -05:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-04-19 09:42:28.512 -05:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-04-19 09:42:28.513 -05:00 [DBG] Executing controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 09:42:28.513 -05:00 [DBG] Executed controller factory for controller PruebaUser.Api.Controllers.UsuarioController (PruebaUser.Api)
2024-04-19 09:42:28.514 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2024-04-19 09:42:28.515 -05:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2024-04-19 09:42:28.516 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 09:42:28.517 -05:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2024-04-19 09:42:28.517 -05:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2024-04-19 09:42:28.518 -05:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2024-04-19 09:42:28.518 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 09:42:28.519 -05:00 [DBG] Attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' using the name '' in request data ...
2024-04-19 09:42:28.520 -05:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2024-04-19 09:42:28.520 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:0000000B": started reading request body.
2024-04-19 09:42:28.521 -05:00 [DBG] Connection id "0HN30FMR4SP18", Request id "0HN30FMR4SP18:0000000B": done reading request body.
2024-04-19 09:42:28.522 -05:00 [DBG] JSON input formatter succeeded, deserializing to type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'
2024-04-19 09:42:28.522 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 09:42:28.523 -05:00 [DBG] Done attempting to bind parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 09:42:28.524 -05:00 [DBG] Attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO' ...
2024-04-19 09:42:28.524 -05:00 [DBG] Done attempting to validate the bound parameter 'usuarioActualizado' of type 'PruebaUser.Core.DTOs.UsuarioCreacionDTO'.
2024-04-19 09:42:28.527 -05:00 [DBG] Entity Framework Core 8.0.4 initialized 'UserDBContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.4' with options: None
2024-04-19 09:42:28.529 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2024-04-19 09:42:28.531 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Usuario>(
    asyncEnumerable: new SingleQueryingEnumerable<Usuario>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Usuario.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Usuario.Apellido (string) Required, 1], [Property: Usuario.Clave (string) Required, 2], [Property: Usuario.Documento (long) Required, 3], [Property: Usuario.Email (string) Required, 4], [Property: Usuario.Nombre (string) Required, 5], [Property: Usuario.TipoDocumentoId (int) Required FK Index, 6] }
            SELECT TOP(1) u.Id, u.Apellido, u.Clave, u.Documento, u.Email, u.Nombre, u.TipoDocumentoId
            FROM Usuario AS u
            WHERE u.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Usuario>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 09:42:28.532 -05:00 [DBG] Creating DbConnection.
2024-04-19 09:42:28.533 -05:00 [DBG] Created DbConnection. (0ms).
2024-04-19 09:42:28.533 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.534 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.534 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:42:28.535 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:42:28.535 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:42:28.536 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 09:42:28.538 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Apellido], [u].[Clave], [u].[Documento], [u].[Email], [u].[Nombre], [u].[TipoDocumentoId]
FROM [Usuario] AS [u]
WHERE [u].[Id] = @__p_0
2024-04-19 09:42:28.539 -05:00 [DBG] Context 'UserDBContext' started tracking 'Usuario' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:42:28.540 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.541 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 09:42:28.541 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.542 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:42:28.543 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.544 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.545 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:42:28.545 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:42:28.546 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:42:28.546 -05:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 09:42:28.549 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Descripcion]
FROM [TipoDocumento] AS [t]
WHERE [t].[Id] = @__p_0
2024-04-19 09:42:28.550 -05:00 [DBG] Context 'UserDBContext' started tracking 'TipoDocumento' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:42:28.551 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.551 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 09:42:28.552 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.552 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:42:28.553 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.554 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.555 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:42:28.555 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:42:28.556 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:42:28.556 -05:00 [DBG] Executing DbCommand [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 09:42:28.559 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@__documento_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Documento] = @__documento_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 09:42:28.560 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.561 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 09:42:28.562 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.562 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:42:28.563 -05:00 [DBG] Compiling query expression: 
'DbSet<Usuario>()
    .Any(usuario => usuario.Email == __emailNuevo_0 && False || (int?)usuario.Id != __idUsuarioActualizar_1)'
2024-04-19 09:42:28.565 -05:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Usuario AS u
                WHERE (u.Email == @__emailNuevo_0) && (CAST(0 AS bit) || (u.Id != @__idUsuarioActualizar_1)))), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        PruebaUser.Infraestructure.UserDBContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2024-04-19 09:42:28.567 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.567 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.568 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:42:28.568 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:42:28.569 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:42:28.569 -05:00 [DBG] Executing DbCommand [Parameters=[@__emailNuevo_0='?' (Size = 4000), @__idUsuarioActualizar_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0 AND [u].[Id] <> @__idUsuarioActualizar_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 09:42:28.572 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[@__emailNuevo_0='?' (Size = 4000), @__idUsuarioActualizar_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuario] AS [u]
        WHERE [u].[Email] = @__emailNuevo_0 AND [u].[Id] <> @__idUsuarioActualizar_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-04-19 09:42:28.573 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.574 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 0ms reading results.
2024-04-19 09:42:28.574 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:28.575 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:42:29.011 -05:00 [DBG] SaveChanges starting for 'UserDBContext'.
2024-04-19 09:42:29.012 -05:00 [DBG] DetectChanges starting for 'UserDBContext'.
2024-04-19 09:42:29.013 -05:00 [DBG] The unchanged property 'Usuario.Apellido' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 09:42:29.014 -05:00 [DBG] An entity of type 'Usuario' tracked by 'UserDBContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:42:29.014 -05:00 [DBG] The unchanged property 'Usuario.Clave' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 09:42:29.015 -05:00 [DBG] The unchanged property 'Usuario.Documento' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 09:42:29.016 -05:00 [DBG] The unchanged property 'Usuario.TipoDocumentoId' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 09:42:29.016 -05:00 [DBG] The foreign key property 'Usuario.TipoDocumentoId' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2024-04-19 09:42:29.018 -05:00 [DBG] DetectChanges completed for 'UserDBContext'.
2024-04-19 09:42:29.022 -05:00 [DBG] Opening connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:29.023 -05:00 [DBG] Opened connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:29.023 -05:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-04-19 09:42:29.024 -05:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-04-19 09:42:29.025 -05:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2024-04-19 09:42:29.025 -05:00 [DBG] Executing DbCommand [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int64), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Usuario] SET [Apellido] = @p0, [Clave] = @p1, [Documento] = @p2, [TipoDocumentoId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2024-04-19 09:42:29.029 -05:00 [INF] Executed DbCommand (3ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (DbType = Int64), @p3='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Usuario] SET [Apellido] = @p0, [Clave] = @p1, [Documento] = @p2, [TipoDocumentoId] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2024-04-19 09:42:29.031 -05:00 [DBG] Closing data reader to 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:29.031 -05:00 [DBG] A data reader for 'UsersDB' on server 'localhost\SQLEXPRESS' is being disposed after spending 1ms reading results.
2024-04-19 09:42:29.032 -05:00 [DBG] Closing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:29.032 -05:00 [DBG] Closed connection to database 'UsersDB' on server 'localhost\SQLEXPRESS' (0ms).
2024-04-19 09:42:29.033 -05:00 [DBG] An entity of type 'Usuario' tracked by 'UserDBContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2024-04-19 09:42:29.034 -05:00 [DBG] SaveChanges completed for 'UserDBContext' with 1 entities written to the database.
2024-04-19 09:42:29.035 -05:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-04-19 09:42:29.036 -05:00 [DBG] No information found on request to perform content negotiation.
2024-04-19 09:42:29.036 -05:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2024-04-19 09:42:29.036 -05:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2024-04-19 09:42:29.037 -05:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2024-04-19 09:42:29.037 -05:00 [INF] Executing OkObjectResult, writing value of type 'PruebaUser.Core.DTOs.UsuarioDTO'.
2024-04-19 09:42:29.038 -05:00 [INF] Executed action PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api) in 525.6154ms
2024-04-19 09:42:29.039 -05:00 [INF] Executed endpoint 'PruebaUser.Api.Controllers.UsuarioController.ActualizarUsuario (PruebaUser.Api)'
2024-04-19 09:42:29.040 -05:00 [DBG] Connection id "0HN30FMR4SP18" completed keep alive response.
2024-04-19 09:42:29.040 -05:00 [DBG] 'UserDBContext' disposed.
2024-04-19 09:42:29.041 -05:00 [DBG] Disposing connection to database 'UsersDB' on server 'localhost\SQLEXPRESS'.
2024-04-19 09:42:29.042 -05:00 [DBG] Disposed connection to database '' on server '' (0ms).
2024-04-19 09:42:29.042 -05:00 [INF] Request finished HTTP/1.1 PUT https://localhost:7041/api/usuario/1 - 200 null application/json; charset=utf-8 543.736ms
2024-04-19 09:54:32.973 -05:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-04-19 09:54:33.031 -05:00 [DBG] Hosting starting
2024-04-19 09:54:33.104 -05:00 [INF] User profile is available. Using 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-04-19 09:54:33.109 -05:00 [DBG] Reading data from file 'C:\Users\Migue\AppData\Local\ASP.NET\DataProtection-Keys\key-b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2.xml'.
2024-04-19 09:54:33.118 -05:00 [DBG] Found key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2}.
2024-04-19 09:54:33.124 -05:00 [DBG] Considering key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} with expiration date 2024-07-18 13:41:10Z as default key.
2024-04-19 09:54:33.126 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 09:54:33.128 -05:00 [DBG] Decrypting secret element using Windows DPAPI.
2024-04-19 09:54:33.129 -05:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2024-04-19 09:54:33.131 -05:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2024-04-19 09:54:33.133 -05:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2024-04-19 09:54:33.134 -05:00 [DBG] Using key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} as the default key.
2024-04-19 09:54:33.135 -05:00 [DBG] Key ring with default key {b3ba4ac1-3abb-4d4a-bee7-6db48e3ff8c2} was loaded during application startup.
2024-04-19 09:54:33.259 -05:00 [INF] Now listening on: https://localhost:7041
2024-04-19 09:54:33.259 -05:00 [INF] Now listening on: http://localhost:5020
2024-04-19 09:54:33.260 -05:00 [DBG] Loaded hosting startup assembly PruebaUser.Api
2024-04-19 09:54:33.260 -05:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2024-04-19 09:54:33.260 -05:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2024-04-19 09:54:33.261 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2024-04-19 09:54:33.261 -05:00 [INF] Hosting environment: Development
2024-04-19 09:54:33.262 -05:00 [INF] Content root path: C:\Users\Migue\Desktop\PruebaUserDB\PruebaUser\PruebaUser.Api
2024-04-19 09:54:33.262 -05:00 [DBG] Hosting started
2024-04-19 09:54:33.555 -05:00 [DBG] Connection id "0HN30G2FVC0GC" received FIN.
2024-04-19 09:54:33.555 -05:00 [DBG] Connection id "0HN30G2FVC0GD" accepted.
2024-04-19 09:54:33.555 -05:00 [DBG] Connection id "0HN30G2FVC0GE" accepted.
2024-04-19 09:54:33.555 -05:00 [DBG] Connection id "0HN30G2FVC0GB" received FIN.
2024-04-19 09:54:33.556 -05:00 [DBG] Connection id "0HN30G2FVC0GE" started.
2024-04-19 09:54:33.556 -05:00 [DBG] Connection id "0HN30G2FVC0GD" started.
2024-04-19 09:54:33.569 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 09:54:33.569 -05:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ProcessAuthenticationWithTelemetryAsync(Boolean isAsync, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2024-04-19 09:54:33.584 -05:00 [DBG] Connection id "0HN30G2FVC0GE" stopped.
2024-04-19 09:54:33.584 -05:00 [DBG] Connection id "0HN30G2FVC0GD" stopped.
2024-04-19 09:54:33.587 -05:00 [DBG] Connection id "0HN30G2FVC0GE" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 09:54:33.587 -05:00 [DBG] Connection id "0HN30G2FVC0GD" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-04-19 09:54:34.041 -05:00 [DBG] Connection id "0HN30G2FVC0GF" accepted.
2024-04-19 09:54:34.042 -05:00 [DBG] Connection id "0HN30G2FVC0GF" started.
2024-04-19 09:54:34.075 -05:00 [DBG] Connection 0HN30G2FVC0GF established using the following protocol: "Tls13"
2024-04-19 09:54:34.114 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/index.html - null null
2024-04-19 09:54:34.178 -05:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-04-19 09:54:34.189 -05:00 [DBG] No candidates found for the request path '/swagger/index.html'
2024-04-19 09:54:34.190 -05:00 [DBG] Request did not match any endpoints
2024-04-19 09:54:34.245 -05:00 [DBG] Response markup is scheduled to include Browser Link script injection.
2024-04-19 09:54:34.247 -05:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2024-04-19 09:54:34.258 -05:00 [DBG] Response markup was updated to include Browser Link script injection.
2024-04-19 09:54:34.259 -05:00 [DBG] Response markup was updated to include browser refresh script injection.
2024-04-19 09:54:34.262 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/index.html - 200 null text/html;charset=utf-8 151.1226ms
2024-04-19 09:54:34.268 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - null null
2024-04-19 09:54:34.272 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_framework/aspnetcore-browser-refresh.js - 200 13764 application/javascript; charset=utf-8 4.09ms
2024-04-19 09:54:34.332 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/_vs/browserLink - null null
2024-04-19 09:54:34.362 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/_vs/browserLink - 200 null text/javascript; charset=UTF-8 30.7275ms
2024-04-19 09:54:34.808 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - null null
2024-04-19 09:54:34.809 -05:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2024-04-19 09:54:34.809 -05:00 [DBG] Request did not match any endpoints
2024-04-19 09:54:34.881 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 73.2162ms
2024-04-19 09:54:47.403 -05:00 [DBG] Connection id "0HN30G2FVC0GG" accepted.
2024-04-19 09:54:47.404 -05:00 [DBG] Connection id "0HN30G2FVC0GG" started.
2024-04-19 09:54:47.409 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5020/api/usuario - null null
2024-04-19 09:54:47.413 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 09:54:47.415 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 09:54:47.416 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:54:47.417 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:54:47.419 -05:00 [DBG] Https port '7041' loaded from configuration.
2024-04-19 09:54:47.420 -05:00 [DBG] Redirecting to 'https://localhost:7041/api/usuario'.
2024-04-19 09:54:47.426 -05:00 [DBG] Connection id "0HN30G2FVC0GG" completed keep alive response.
2024-04-19 09:54:47.426 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5020/api/usuario - 307 0 null 17.5986ms
2024-04-19 09:54:47.427 -05:00 [DBG] Connection id "0HN30G2FVC0GH" accepted.
2024-04-19 09:54:47.428 -05:00 [DBG] Connection id "0HN30G2FVC0GH" started.
2024-04-19 09:54:47.433 -05:00 [DBG] Connection 0HN30G2FVC0GH established using the following protocol: "Tls13"
2024-04-19 09:54:47.440 -05:00 [INF] Request starting HTTP/1.1 GET https://localhost:7041/api/usuario - null null
2024-04-19 09:54:47.442 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 09:54:47.443 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 09:54:47.443 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:54:47.444 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:54:47.483 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:54:47.486 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 09:54:47.487 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 09:54:47.490 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 09:54:47.490 -05:00 [DBG] Connection id "0HN30G2FVC0GH" completed keep alive response.
2024-04-19 09:54:47.491 -05:00 [INF] Request finished HTTP/1.1 GET https://localhost:7041/api/usuario - 401 0 null 50.4781ms
2024-04-19 09:54:56.982 -05:00 [INF] Request starting HTTP/2 GET https://localhost:7041/api/usuario - null null
2024-04-19 09:54:56.983 -05:00 [DBG] 1 candidate(s) found for the request path '/api/usuario'
2024-04-19 09:54:56.984 -05:00 [DBG] Endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)' with route pattern 'api/usuario' is valid for the request path '/api/usuario'
2024-04-19 09:54:56.984 -05:00 [DBG] Request matched endpoint 'PruebaUser.Api.Controllers.UsuarioController.ListarUsuarios (PruebaUser.Api)'
2024-04-19 09:54:56.985 -05:00 [DBG] Static files was skipped as the request already matched an endpoint.
2024-04-19 09:54:56.987 -05:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2024-04-19 09:54:56.988 -05:00 [DBG] Policy authentication schemes  did not succeed
2024-04-19 09:54:56.988 -05:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-04-19 09:54:56.989 -05:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-04-19 09:54:56.989 -05:00 [INF] Request finished HTTP/2 GET https://localhost:7041/api/usuario - 401 0 null 7.7409ms
